{"code":"(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},81:function(e,t,n){\"use strict\";n.r(t);var c=n(0),r=n.n(c),a=n(31),s=n.n(a),i=(n(51),n(52),n(53),n(1));function o(){return Object(i.jsxs)(\"div\",{className:\"login\",children:[Object(i.jsx)(\"p\",{children:\"An insight into your listening habits on Spotify\"}),Object(i.jsx)(\"a\",{href:\"https://react-express-spotify.herokuapp.com/login\",children:\" Login to Spotify \"})]})}var l=n(12),j=n(3),u=n(5);function b(e){var t=Math.floor(e/6e4),n=(e%6e4/1e3).toFixed(0);return t+\":\"+(n<10?\"0\":\"\")+n}var d=function(){window.localStorage.clear(),window.sessionStorage.clear(),window.location.replace(\"/\");var e=Object(c.useState)(!1),t=Object(u.a)(e,2),n=t[0],r=t[1];return n?Object(i.jsx)(Redirect,{to:\"/\",push:!0}):Object(i.jsx)(Button,{onClick:function(){localStorage.removeItem(\"whpf_user\"),r(!0)},children:\"LogOut\"})},h=function(){return Object(i.jsxs)(\"div\",{className:\"navbar\",children:[Object(i.jsx)(\"li\",{children:Object(i.jsx)(l.b,{to:\"/\",children:\"HOME\"})}),Object(i.jsx)(\"li\",{children:Object(i.jsx)(l.b,{to:\"/TopTracks\",activeStyle:{fontWeight:\"bold\",color:\"green\"},children:\"Top Tracks\"})}),Object(i.jsx)(\"li\",{children:Object(i.jsx)(l.b,{to:\"/RecentTracks\",activeStyle:{fontWeight:\"bold\",color:\"green\"},children:\"RecentlyPlayed\"})}),Object(i.jsx)(\"li\",{children:Object(i.jsx)(l.b,{to:\"/Moods\",activeStyle:{fontWeight:\"bold\",color:\"green\"},children:\"Moods\"})}),Object(i.jsx)(\"li\",{style:{float:\"right\"},children:Object(i.jsx)(l.b,{to:\"/logout\",children:\"Logout\"})})]})},O=n(2),f=n.n(O),x=n(6),m=n(34),p=n.n(m),g=n(35),v=new(n.n(g).a),k=function(){var e=Object(x.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=window.localStorage.getItem(\"refresh_token\"),p.a.get(\"https://react-express-spotify.herokuapp.com/refresh_token\",{params:{refresh_token:t}}).then((function(e){var t=e.data.access_token;console.log(\"New acccess_token\",t),window.localStorage.setItem(\"access_token\",t),window.localStorage.setItem(\"token_timestamp\",Date.now()),window.location.reload()})).catch((function(e){return console.log(e)}));case 2:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=function(){var e,t={},n=/([^&;=]+)=?([^&;]*)/g,c=window.location.hash.substring(1);for(e=n.exec(c);e;)t[e[1]]=decodeURIComponent(e[2]),e=n.exec(c);return t}(),t=e.error,n=e.access_token,c=e.refresh_token;if(t&&(console.log(t),k()),n&&c)return window.location.replace(\"/\"),window.localStorage.setItem(\"access_token\",n),window.localStorage.setItem(\"refresh_token\",c),window.localStorage.setItem(\"token_timestamp\",Date.now()),n;var r=window.localStorage.getItem(\"token_timestamp\");return r&&\"undefined\"!==r&&Date.now()-r>36e5&&(console.log(\"Token expired, refreshing token\"),k()),window.localStorage.getItem(\"access_token\")},y=w();v.setAccessToken(y);var S=function(e){var t=e.track,n=e.index;return Object(i.jsx)(\"a\",{className:\"TrackInfoLink\",href:t.uri,children:Object(i.jsxs)(\"div\",{className:\"card\",children:[Object(i.jsx)(\"img\",{src:t.album.images[1].url,alt:\"Track\"}),Object(i.jsxs)(\"div\",{className:\"containerCard\",children:[Object(i.jsxs)(\"h4\",{children:[Object(i.jsx)(\"p\",{children:n+1}),Object(i.jsx)(\"b\",{children:t.artists.map((function(e){return e.name})).join(\", \")})]}),Object(i.jsx)(\"p\",{children:t.name})]})]})})},N=function(){var e=Object(c.useState)(1),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(),s=Object(u.a)(a,2),o=s[0],l=s[1],j=Object(c.useState)(\"short_term\"),b=Object(u.a)(j,2),d=b[0],h=b[1],O=function(e,t){var n;(n=t)!=d&&l(),h(n),r(e)};return Object(c.useEffect)((function(){v.getMyTopTracks({limit:50,time_range:d}).then((function(e){e&&(console.log(e),l({items:e.items}))})).catch((function(){w()}))}),[d]),Object(i.jsxs)(\"div\",{children:[Object(i.jsx)(\"h2\",{children:\"Top Tracks\"}),Object(i.jsxs)(\"div\",{className:\"container\",children:[Object(i.jsxs)(\"div\",{className:\"bloc-tabs\",children:[Object(i.jsx)(\"button\",{className:1===n?\"tabs active-tabs\":\"tabs\",onClick:function(){return O(1,\"short_term\")},children:\"4 weeks\"}),Object(i.jsx)(\"button\",{className:2===n?\"tabs active-tabs\":\"tabs\",onClick:function(){return O(2,\"medium_term\")},children:\"6 months\"}),Object(i.jsx)(\"button\",{className:3===n?\"tabs active-tabs\":\"tabs\",onClick:function(){return O(3,\"long_term\")},children:\"All time\"})]}),o?Object(i.jsxs)(\"div\",{className:\"content-tabs\",children:[Object(i.jsx)(\"div\",{className:1===n?\"content  active-content\":\"content\",children:o.items.map((function(e,t){return Object(i.jsx)(S,{track:e,index:o.items.indexOf(e)},t)}))}),Object(i.jsx)(\"div\",{className:2===n?\"content  active-content\":\"content\",children:o.items.map((function(e,t){return Object(i.jsx)(S,{track:e,index:o.items.indexOf(e)},t)}))}),Object(i.jsx)(\"div\",{className:3===n?\"content  active-content\":\"content\",children:o.items.map((function(e,t){return Object(i.jsx)(S,{track:e,index:o.items.indexOf(e)},t)}))})]}):Object(i.jsx)(\"b\",{children:\"LOADING\"})]})]})},_=n(17),I=n(4),T=n(36);var F=function(){var e=Object(x.a)(f.a.mark((function e(t,n,c){var r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c+n,e.next=3,v.getUserPlaylists({limit:n,offset:c}).then((function(e){e&&(console.log(e),a=[].concat(Object(I.a)(t),Object(I.a)(e.items)),e.next&&(a=F(a,n,r)))})).catch((function(){w()}));case 3:return e.abrupt(\"return\",a);case 4:case\"end\":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),A=function(){var e=Object(x.a)(f.a.mark((function e(t,n,c,r){var a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r+c,e.next=3,v.getPlaylistTracks(y,t,{limit:c,offset:r}).then((function(e){e&&(s=[].concat(Object(I.a)(n),Object(I.a)(e.items)),e.next&&(s=A(t,s,c,a)))}));case 3:return e.abrupt(\"return\",s);case 4:case\"end\":return e.stop()}}),e)})));return function(t,n,c,r){return e.apply(this,arguments)}}();function C(e,t){var n=e,c=[];if(e)for(;n.length;)c=[].concat(Object(I.a)(c),[n.splice(0,t)]);return c}var D=function(){var e=Object(c.useState)(),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(),s=Object(u.a)(a,2),o=s[0],l=s[1],j=Object(c.useState)(1),b=Object(u.a)(j,2),d=b[0],h=b[1],O=Object(c.useState)(\"sad\"),m=Object(u.a)(O,2),p=m[0],g=m[1],k=Object(c.useState)(),w=Object(u.a)(k,2),y=w[0],N=w[1],D=Object(c.useState)(),L=Object(u.a)(D,2),M=L[0],E=L[1],G=JSON.parse(window.sessionStorage.getItem(\"audio_features\")),P=JSON.parse(window.sessionStorage.getItem(\"tracks\")),R=function(){var e=Object(x.a)(f.a.mark((function e(t){var n,c,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={tracks:[]},c=0;case 2:if(!(c<t.length)){e.next=10;break}return e.next=5,v.getTracks(t[c].map((function(e){return e.id})));case 5:r=e.sent,n.tracks=[].concat(Object(I.a)(n.tracks),Object(I.a)(r.tracks));case 7:c++,e.next=2;break;case 10:E(n);case 11:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(e,t){console.log(n),t!=p&&E(),g(t),h(e)};return Object(c.useEffect)((function(){P?(console.log(\"Fetching all songs...\"),l(P)):function(){var e=Object(x.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,F([],50,0).then(function(){var e=Object(x.a)(f.a.mark((function e(n){var c,r,a,s,i,o,j;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(\"Fetching all songs...\"),c=!1,r=!1,e.prev=3,s=Object(T.a)(n.map((function(e){return e.id})));case 5:return e.next=7,s.next();case 7:if(!(c=!(i=e.sent).done)){e.next=20;break}return o=i.value,e.t0=[],e.t1=Object(I.a)(t),e.t2=I.a,e.next=14,A(o,[],100,0).then((function(e){if(e)return e.map((function(e){return e.track.id}))}));case 14:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),t=e.t0.concat.call(e.t0,e.t1,e.t4);case 17:c=!1,e.next=5;break;case 20:e.next=26;break;case 22:e.prev=22,e.t5=e.catch(3),r=!0,a=e.t5;case 26:if(e.prev=26,e.prev=27,!c||null==s.return){e.next=31;break}return e.next=31,s.return();case 31:if(e.prev=31,!r){e.next=34;break}throw a;case 34:return e.finish(31);case 35:return e.finish(26);case 36:j=Object(I.a)(new Set(t)),l(j),window.sessionStorage.setItem(\"tracks\",JSON.stringify(t));case 39:case\"end\":return e.stop()}}),e,null,[[3,22,26,36],[27,,31,35]])})));return function(t){return e.apply(this,arguments)}}());case 3:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),Object(c.useEffect)((function(){if(G)console.log(\"Fetching audio data...\"),r(G);else if(o){var e=function(){var e=Object(x.a)(f.a.mark((function e(n){var c,a,s,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=Object(_.a)(t),e.prev=1,c.s();case 3:if((a=c.n()).done){e.next=11;break}return s=a.value,e.next=7,v.getAudioFeaturesForTracks(s);case 7:i=e.sent,n=[].concat(Object(I.a)(n),Object(I.a)(i.audio_features));case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),c.e(e.t0);case 16:return e.prev=16,c.f(),e.finish(16);case 19:r(n),window.sessionStorage.setItem(\"audio_features\",JSON.stringify(n));case 21:case\"end\":return e.stop()}}),e,null,[[1,13,16,19]])})));return function(t){return e.apply(this,arguments)}}(),t=C(o,100);console.log(\"Fetching audio data...\"),e([])}}),[o]),Object(c.useEffect)((function(){o&&N(1)}),[o]),Object(c.useEffect)((function(){if(n){var e=n.filter((function(e){return e}));if(console.log(e),\"sad\"==p){console.log(\":(\");var t=C(e.filter((function(e){return e.valence<.3&&e.energy<.5&&e.danceability<.6})),50);console.log(t),t?R(t):alert(\"No matches\")}else if(\"happy\"==p){console.log(\":)\");var c=C(e.filter((function(e){return e.tempo>110&&e.speechiness<.2&&e.energy>.6&&e.danceability>.6&&e.valence>.6})),50);c?R(c):alert(\"No matches\")}else if(\"study\"==p){console.log(\":/\");var r=C(e.filter((function(e){return e.speechiness<.4&&e.energy<.55&&e.instrumentalness>.7})),50);r?R(r):alert(\"No matches\")}else if(\"gym (mad)\"==p){var a=C(e.filter((function(e){return e.tempo>130&&e.energy>.65&&e.acousticness<.2&&e.liveness>.1})),50);a?R(a):alert(\"No matches\")}}}),[p,n]),console.log(M),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)(\"h1\",{children:[\" \",\"Gather all the songs from all your playlists and find the songs that match your current mood\"]}),Object(i.jsx)(\"button\",{children:\" Get All Playlists\"}),Object(i.jsx)(\"button\",{children:\" Get Only Your Playlists\"}),Object(i.jsx)(\"div\",{children:y?Object(i.jsxs)(\"div\",{className:\"container\",children:[Object(i.jsxs)(\"h2\",{children:[\"Songs Discovered: \",n?n.length:Object(i.jsx)(i.Fragment,{children:\"0\"})]}),Object(i.jsxs)(\"div\",{className:\"bloc-tabs\",children:[Object(i.jsx)(\"button\",{className:1===d?\"tabs active-tabs\":\"tabs\",onClick:function(){return J(1,\"sad\")},children:\"Sad\"}),Object(i.jsx)(\"button\",{className:2===d?\"tabs active-tabs\":\"tabs\",onClick:function(){return J(2,\"happy\")},children:\"Happy\"}),Object(i.jsx)(\"button\",{className:3===d?\"tabs active-tabs\":\"tabs\",onClick:function(){return J(3,\"study\")},children:\"Study\"}),Object(i.jsx)(\"button\",{className:4===d?\"tabs active-tabs\":\"tabs\",onClick:function(){return J(4,\"gym (mad)\")},children:\"Gym >:(\"})]})]}):Object(i.jsx)(\"b\",{children:\"Fetching all Songs....\"})}),Object(i.jsxs)(\"p\",{children:[\"Songs Found: \",M?Object(i.jsx)(i.Fragment,{children:M.tracks.length}):0,\" \"]}),n?Object(i.jsxs)(\"div\",{className:\"content-tabs\",children:[Object(i.jsx)(\"div\",{className:1===d?\"content  active-content\":\"content\",children:M?Object(i.jsx)(i.Fragment,{children:M.tracks.map((function(e,t){return Object(i.jsx)(S,{track:e,index:M.tracks.indexOf(e)},t)}))}):Object(i.jsx)(\"p\",{children:\"Loading Sad songs :(\"})}),Object(i.jsx)(\"div\",{className:2===d?\"content  active-content\":\"content\",children:M?Object(i.jsx)(i.Fragment,{children:M.tracks.map((function(e,t){return Object(i.jsx)(S,{track:e,index:M.tracks.indexOf(e)},t)}))}):Object(i.jsx)(\"p\",{children:\"Loading Happy Songs :D\"})}),Object(i.jsx)(\"div\",{className:3===d?\"content  active-content\":\"content\",children:M?Object(i.jsx)(i.Fragment,{children:M.tracks.map((function(e,t){return Object(i.jsx)(S,{track:e,index:M.tracks.indexOf(e)},t)}))}):Object(i.jsx)(\"p\",{children:\"Loading Study Songs :/\"})}),Object(i.jsx)(\"div\",{className:4===d?\"content  active-content\":\"content\",children:M?Object(i.jsx)(i.Fragment,{children:M.tracks.map((function(e,t){return Object(i.jsx)(S,{track:e,index:M.tracks.indexOf(e)},t)}))}):Object(i.jsx)(\"p\",{children:\"Loading Gym Songs >:(\"})})]}):Object(i.jsx)(\"b\",{children:\"Fetching Audio Data...\"})]})},L=n(45),M=function(){var e=Object(c.useState)(),t=Object(u.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){v.getMyRecentlyPlayedTracks({limit:50}).then((function(e){e&&(console.log(e),r({items:e.items}))})).catch((function(){w()}))}),[]),console.log(n),Object(i.jsx)(\"div\",{children:n?Object(i.jsxs)(\"div\",{className:\"recently-played\",children:[Object(i.jsx)(\"h2\",{children:\"Recently played tracks\"}),Object(i.jsxs)(\"table\",{className:\"table\",children:[Object(i.jsx)(\"thead\",{children:Object(i.jsxs)(\"tr\",{children:[Object(i.jsx)(\"th\",{children:\"Duration\"}),Object(i.jsx)(\"th\",{children:\"Track\"}),Object(i.jsx)(\"th\",{children:\"Artist(s)\"}),Object(i.jsx)(\"th\",{children:\"Played at\"})]})}),Object(i.jsx)(\"tbody\",{children:n.items.map((function(e){return function(e){return Object(i.jsxs)(\"tr\",{children:[Object(i.jsx)(\"td\",{children:Object(i.jsx)(\"a\",{href:e.track.uri,className:\"row-link\",children:b(e.track.duration_ms)})}),Object(i.jsx)(\"td\",{children:Object(i.jsx)(\"a\",{href:e.track.uri,tabIndex:\"-1\",className:\"row-link\",children:e.track.name})}),Object(i.jsx)(\"td\",{children:Object(i.jsx)(\"a\",{href:e.track.uri,tabIndex:\"-1\",className:\"row-link\",children:e.track.artists.map((function(e){return e.name})).join(\", \")})}),Object(i.jsx)(\"td\",{children:Object(i.jsx)(\"a\",{href:e.track.uri,tabIndex:\"-1\",className:\"row-link\",children:Object(L.a)(Date.parse(e.played_at),\"dd/MM/yyyy, hh:mma\")})})]},e.played_at)}(e)}))})]})]}):Object(i.jsx)(\"b\",{children:\"LOADING\"})})};n(80);function E(){return Object(i.jsx)(l.a,{children:Object(i.jsxs)(\"div\",{children:[Object(i.jsx)(h,{}),Object(i.jsxs)(j.c,{children:[Object(i.jsx)(j.a,{path:\"/RecentTracks\",children:Object(i.jsx)(M,{})}),Object(i.jsx)(j.a,{path:\"/logout\",children:Object(i.jsx)(d,{})}),Object(i.jsx)(j.a,{path:\"/TopTracks\",children:Object(i.jsx)(N,{})}),Object(i.jsx)(j.a,{path:\"/Moods\",children:Object(i.jsx)(D,{})}),Object(i.jsx)(j.a,{path:\"/\",children:Object(i.jsx)(\"h1\",{children:\"Welcome to Spoti-FYI\"})})]})]})})}var G=function(){return Object(i.jsx)(\"div\",{className:\"App\",children:y?Object(i.jsx)(E,{}):Object(i.jsx)(o,{})})};s.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(G,{})}),document.getElementById(\"root\"))}},[[81,1,2]]]);","name":"static/js/main.ca4141cd.chunk.js","map":{"version":3,"sources":["static/js/main.ca4141cd.chunk.js"],"names":["this","push","module","exports","__webpack_require__","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","jsx_runtime","Login_Login","Object","className","children","href","react_router_dom","react_router","slicedToArray","millisToMinutesAndSeconds","millis","minutes","Math","floor","seconds","toFixed","functions_LogoutButton","window","localStorage","clear","sessionStorage","location","replace","_useState","_useState2","loggedOut","setLoggedOut","Redirect","to","Button","onClick","removeItem","components_Navbar","activeStyle","fontWeight","color","style","float","regenerator","regenerator_default","asyncToGenerator","axios","axios_default","spotify_web_api","spotifyApi","a","refreshAccessToken","_ref","mark","_callee","refresh_token","wrap","_context","prev","next","getItem","get","SERVER","params","then","res","access_token","data","console","log","setItem","Date","now","reload","catch","e","stop","apply","arguments","spotifyAPI_getAccessToken","_getHashParams","hashParams","q","hash","substring","exec","decodeURIComponent","getHashParams","error","tokenExpiry","token","setAccessToken","components_TrackInfo","track","index","uri","src","album","images","url","alt","artists","map","name","join","Pages_TopTracks","toggleState","setToggleState","_useState3","_useState4","tracks","setTracks","_useState5","_useState6","timeRange","setTimeRange","toggleTab","time_range","newTimeRange","getMyTopTracks","limit","response","items","key","indexOf","createForOfIteratorHelper","toConsumableArray","asyncIterator","Moods_getplaylists","playlists","offset","newOffset","newPlaylist","getUserPlaylists","concat","abrupt","_x","_x2","_x3","Moods_getTrackfromPlaylist","_ref2","_callee2","playlistId","newTrack","_context2","getPlaylistTracks","_x4","_x5","_x6","_x7","arraySplice","array","size","spliced","length","splice","Pages_Moods","audioFet","setAudioFet","allSongs","setAllSongs","_useState7","_useState8","mood","setMood","_useState9","_useState10","songs","setSongs","_useState11","_useState12","audio_feat","JSON","parse","trackstorage","getTracksfromList","_ref3","_callee3","arraysplice","Tracks","i","c","_context3","getTracks","x","id","sent","_x8","moods","_ref4","_callee5","all_songs","_context5","_ref5","_callee4","_iteratorAbruptCompletion","_didIteratorError","_iteratorError","_iterator","_step","unique","_context4","done","value","t0","t1","t2","t3","t4","call","t5","return","finish","Set","stringify","_x9","_fetchData","_ref6","_callee6","all_audio","_iterator2","_step2","_context6","allSongsSpliced","s","getAudioFeaturesForTracks","audio_features","f","_x10","audioFetFix","filter","FilteredSplice","valence","energy","danceability","alert","_FilteredSplice","tempo","speechiness","_FilteredSplice2","instrumentalness","_FilteredSplice3","acousticness","liveness","format","Pages_RecentTracks","RecentlyPlayed","setRecentlyPlayed","getMyRecentlyPlayedTracks","item","duration_ms","tabIndex","played_at","RecentTracks_TableItem","Dashboard","path","src_App","render","StrictMode","document","getElementById"],"mappings":"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"},"input":"(this[\"webpackJsonpclient\"] = this[\"webpackJsonpclient\"] || []).push([[0],{\n\n/***/ 51:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 52:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 53:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 81:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(0);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(31);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(51);\n\n// EXTERNAL MODULE: ./src/App.css\nvar App = __webpack_require__(52);\n\n// EXTERNAL MODULE: ./src/Pages/Login.css\nvar Login = __webpack_require__(53);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(1);\n\n// CONCATENATED MODULE: ./src/Pages/Login.js\nvar SERVER_URL=\"https://react-express-spotify.herokuapp.com/login\";// https://react-express-spotify.herokuapp.com/login http://localhost:8888/login\nfunction Login_Login(){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"login\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:\"An insight into your listening habits on Spotify\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:SERVER_URL,children:\" Login to Spotify \"})]});}\n// EXTERNAL MODULE: ./node_modules/react-router-dom/esm/react-router-dom.js\nvar react_router_dom = __webpack_require__(12);\n\n// EXTERNAL MODULE: ./node_modules/react-router-dom/node_modules/react-router/esm/react-router.js\nvar react_router = __webpack_require__(3);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules\nvar slicedToArray = __webpack_require__(5);\n\n// CONCATENATED MODULE: ./src/components/functions.js\n// gets hash parameters\nfunction getHashParams(){var hashParams={};var e,r=/([^&;=]+)=?([^&;]*)/g,q=window.location.hash.substring(1);e=r.exec(q);while(e){hashParams[e[1]]=decodeURIComponent(e[2]);e=r.exec(q);}return hashParams;}function millisToMinutesAndSeconds(millis){var minutes=Math.floor(millis/60000);var seconds=(millis%60000/1000).toFixed(0);return minutes+\":\"+(seconds<10?\"0\":\"\")+seconds;}var functions_LogoutButton=function LogoutButton(){window.localStorage.clear();window.sessionStorage.clear();window.location.replace(\"/\");var _useState=Object(react[\"useState\"])(false),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),loggedOut=_useState2[0],setLoggedOut=_useState2[1];var logout=function logout(){localStorage.removeItem(\"whpf_user\");setLoggedOut(true);};if(loggedOut){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Redirect,{to:\"/\",push:true});}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:logout,children:\"LogOut\"});};\n// CONCATENATED MODULE: ./src/components/Navbar.js\nvar Navbar_Navbar=function Navbar(){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"navbar\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* NavLink */],{to:\"/\",children:\"HOME\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* NavLink */],{to:\"/TopTracks\",activeStyle:{fontWeight:\"bold\",color:\"green\"},children:\"Top Tracks\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* NavLink */],{to:\"/RecentTracks\",activeStyle:{fontWeight:\"bold\",color:\"green\"},children:\"RecentlyPlayed\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* NavLink */],{to:\"/Moods\",activeStyle:{fontWeight:\"bold\",color:\"green\"},children:\"Moods\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{style:{float:\"right\"},children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* NavLink */],{to:\"/logout\",children:\"Logout\"})})]});};/* harmony default export */ var components_Navbar = (Navbar_Navbar);\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(2);\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(6);\n\n// EXTERNAL MODULE: ./node_modules/axios/index.js\nvar axios = __webpack_require__(34);\nvar axios_default = /*#__PURE__*/__webpack_require__.n(axios);\n\n// EXTERNAL MODULE: ./node_modules/spotify-web-api-js/src/spotify-web-api.js\nvar spotify_web_api = __webpack_require__(35);\nvar spotify_web_api_default = /*#__PURE__*/__webpack_require__.n(spotify_web_api);\n\n// CONCATENATED MODULE: ./src/components/spotifyAPI.js\nvar EXPIRATION_TIME=3600000;// 1 hour\nvar SERVER=\"https://react-express-spotify.herokuapp.com/\";// or https://react-express-spotify.herokuapp.com http://localhost:8888\n//REFRESH ACCESS TOKEN EVERY 1 HOUR\n// REFRESH_URI\n// USES JMPerez's spotify-web-api-js\nvar spotifyApi=new spotify_web_api_default.a();// constantly refreshing\nvar refreshAccessToken=/*#__PURE__*/function(){var _ref=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var refresh_token;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// take refresh token from local storage\nrefresh_token=window.localStorage.getItem(\"refresh_token\");axios_default.a.get(SERVER+\"refresh_token\",{params:{refresh_token:refresh_token}}).then(function(res){var access_token=res.data.access_token;console.log(\"New acccess_token\",access_token);window.localStorage.setItem(\"access_token\",access_token);window.localStorage.setItem(\"token_timestamp\",Date.now());window.location.reload();}).catch(function(e){return console.log(e);});case 2:case\"end\":return _context.stop();}}},_callee);}));return function refreshAccessToken(){return _ref.apply(this,arguments);};}();// GET TOKEN, REFRESH IF REQUIRED\nvar spotifyAPI_getAccessToken=function getAccessToken(){// Takes token from our url\nvar _getHashParams=getHashParams(),error=_getHashParams.error,access_token=_getHashParams.access_token,refresh_token=_getHashParams.refresh_token;//  token invalid freom timeout\nif(error){console.log(error);refreshAccessToken();}if(access_token&&refresh_token){window.location.replace(\"/\");window.localStorage.setItem(\"access_token\",access_token);window.localStorage.setItem(\"refresh_token\",refresh_token);window.localStorage.setItem(\"token_timestamp\",Date.now());return access_token;}// THIS WILL AUTO REFRESH OUR TOKEN BASED ON EXPIRY TIME\nvar tokenExpiry=window.localStorage.getItem(\"token_timestamp\");if(tokenExpiry&&tokenExpiry!==\"undefined\"&&Date.now()-tokenExpiry>EXPIRATION_TIME){console.log(\"Token expired, refreshing token\");refreshAccessToken();}var local_access_token=window.localStorage.getItem(\"access_token\");return local_access_token;};// SET OUR TOKEN with our spotify-web-api-js\nvar token=spotifyAPI_getAccessToken();spotifyApi.setAccessToken(token);\n// CONCATENATED MODULE: ./src/components/TrackInfo.js\n// our track card for displaying artist, trackname and the picture\nvar TrackInfo_TrackInfo=function TrackInfo(_ref){var track=_ref.track,index=_ref.index;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{className:\"TrackInfoLink\",href:track.uri,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"card\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:track.album.images[1].url,alt:\"Track\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"containerCard\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"h4\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:index+1}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:track.artists.map(function(e){return e.name;}).join(\", \")})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:track.name})]})]})});};/* harmony default export */ var components_TrackInfo = (TrackInfo_TrackInfo);\n// CONCATENATED MODULE: ./src/Pages/TopTracks.js\nvar TopTracks_TopTracks=function TopTracks(){var _useState=Object(react[\"useState\"])(1),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),toggleState=_useState2[0],setToggleState=_useState2[1];var _useState3=Object(react[\"useState\"])(),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),tracks=_useState4[0],setTracks=_useState4[1];var _useState5=Object(react[\"useState\"])(\"short_term\"),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),timeRange=_useState6[0],setTimeRange=_useState6[1];var changeTerm=function changeTerm(newTimeRange){if(newTimeRange!=timeRange){setTracks();}setTimeRange(newTimeRange);};var toggleTab=function toggleTab(index,time_range){changeTerm(time_range);setToggleState(index);};Object(react[\"useEffect\"])(function(){spotifyApi.getMyTopTracks({limit:50,time_range:timeRange}).then(function(response){if(response){console.log(response);setTracks({items:response.items});}}).catch(function(){spotifyAPI_getAccessToken();});},[timeRange]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h2\",{children:\"Top Tracks\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"container\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"bloc-tabs\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:toggleState===1?\"tabs active-tabs\":\"tabs\",onClick:function onClick(){return toggleTab(1,\"short_term\");},children:\"4 weeks\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:toggleState===2?\"tabs active-tabs\":\"tabs\",onClick:function onClick(){return toggleTab(2,\"medium_term\");},children:\"6 months\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:toggleState===3?\"tabs active-tabs\":\"tabs\",onClick:function onClick(){return toggleTab(3,\"long_term\");},children:\"All time\"})]}),tracks?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"content-tabs\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:toggleState===1?\"content  active-content\":\"content\",children:tracks.items.map(function(track,key){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_TrackInfo,{track:track,index:tracks.items.indexOf(track)},key);})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:toggleState===2?\"content  active-content\":\"content\",children:tracks.items.map(function(track,key){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_TrackInfo,{track:track,index:tracks.items.indexOf(track)},key);})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:toggleState===3?\"content  active-content\":\"content\",children:tracks.items.map(function(track,key){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_TrackInfo,{track:track,index:tracks.items.indexOf(track)},key);})})]}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:\"LOADING\"})]})]});};/* harmony default export */ var Pages_TopTracks = (TopTracks_TopTracks);\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\nvar createForOfIteratorHelper = __webpack_require__(17);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 3 modules\nvar toConsumableArray = __webpack_require__(4);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncIterator.js\nvar asyncIterator = __webpack_require__(36);\n\n// CONCATENATED MODULE: ./src/components/UserSongs.js\nvar getplaylists=/*#__PURE__*/function(){var _ref=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(playlists,limit,offset){var newOffset,newPlaylist;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:newOffset=offset+limit;_context.next=3;return spotifyApi.getUserPlaylists({limit:limit,offset:offset}).then(function(response){if(response){newPlaylist=[].concat(Object(toConsumableArray[\"a\" /* default */])(playlists),Object(toConsumableArray[\"a\" /* default */])(response.items));/*if (response.next) {\n                newPlaylist = getplaylists(newPlaylist, limit, newOffset)\n            } */}}).catch(function(){spotifyAPI_getAccessToken();});case 3:return _context.abrupt(\"return\",newPlaylist);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getplaylists(_x,_x2,_x3){return _ref.apply(this,arguments);};}();var getTrackfromPlaylist=/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(playlistId,tracks,limit,offset){var newOffset,newTrack;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:newOffset=offset+limit;_context2.next=3;return spotifyApi.getPlaylistTracks(token,playlistId,{limit:limit,offset:offset}).then(function(response){if(response){newTrack=[].concat(Object(toConsumableArray[\"a\" /* default */])(tracks),Object(toConsumableArray[\"a\" /* default */])(response.items));/*if (response.next) {\n                newTrack = getTrackfromPlaylist(playlistId, newTrack, limit, newOffset)\n            } */}});case 3:return _context2.abrupt(\"return\",newTrack);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function getTrackfromPlaylist(_x4,_x5,_x6,_x7){return _ref2.apply(this,arguments);};}();var getAllSongs=/*#__PURE__*/function(){var _ref3=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(res){var c;return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return getTrackfromPlaylist(res,[],100,0).then(function(response){if(response){return response.map(function(x){return x.track.id;});}});case 2:c=_context3.sent;return _context3.abrupt(\"return\",c);case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function getAllSongs(_x8){return _ref3.apply(this,arguments);};}();function fetchData(){return UserSongs_fetchData.apply(this,arguments);}function UserSongs_fetchData(){UserSongs_fetchData=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee5(){return regenerator_default.a.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return getplaylists([],50,0).then(/*#__PURE__*/function(){var _ref4=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee4(response){var all_songs,_iterator,_step,index;return regenerator_default.a.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:all_songs=[];_iterator=Object(createForOfIteratorHelper[\"a\" /* default */])(response.map(function(x){return x.id;}));_context4.prev=2;_iterator.s();case 4:if((_step=_iterator.n()).done){_context4.next=16;break;}index=_step.value;_context4.t0=[];_context4.t1=Object(toConsumableArray[\"a\" /* default */])(all_songs);_context4.t2=toConsumableArray[\"a\" /* default */];_context4.next=11;return getAllSongs(index);case 11:_context4.t3=_context4.sent;_context4.t4=(0,_context4.t2)(_context4.t3);all_songs=_context4.t0.concat.call(_context4.t0,_context4.t1,_context4.t4);case 14:_context4.next=4;break;case 16:_context4.next=21;break;case 18:_context4.prev=18;_context4.t5=_context4[\"catch\"](2);_iterator.e(_context4.t5);case 21:_context4.prev=21;_iterator.f();return _context4.finish(21);case 24:return _context4.abrupt(\"return\",all_songs);case 25:case\"end\":return _context4.stop();}}},_callee4,null,[[2,18,21,24]]);}));return function(_x9){return _ref4.apply(this,arguments);};}());case 2:return _context5.abrupt(\"return\",_context5.sent);case 3:case\"end\":return _context5.stop();}}},_callee5);}));return UserSongs_fetchData.apply(this,arguments);}\n// CONCATENATED MODULE: ./src/Pages/Moods.js\n// CHOOSE YOUR MOODS: SAD, GYM, GROOVY(DANCE), HAPPY, STUDY, chill glad\n// GET AUDIOFEATURES OF SEVERAL TRACKS\n// GET ALL TRACKS FROM PLAYLIST, THEN ALL TRACJKS FROM SAVED\n// Find the best songs to fit your mood from your playlists:\n// sad songs: energy : less than 0.5 happy songs have more energy and dancibility VALENCE HIGH HAPPY LOW SAD\n// study songs have high instrumentals low speechiness\n/*\nDanceability: The degree of how suitable a track is for dancing based on tempo, rhythm stability, beat strength, and overall regularity. (0~1)\nEnergy: The perceptual measure of intensity based on dynamic range, perceived loudness, timbre, onset rate, and general entropy. (0~1)\nKey: The estimated overall pitch class of the track and its type of scale from which its melodic content is derived.\nLoudness: The quality of a sound that is the primary psychological correlate of amplitude in decibel. (-60~0)\nSpeechiness: The presence of spoken words in a track. (0~1)\nAcousticness: The confidence measure whether the track is acoustic. (0~1)\nLiveness: The presence of an audience in the recording. Higher liveness values represent an increased probability that the track was performed live. (0~1)\nValence: The musical positiveness conveyed by a track (e.g. happy, cheerful, euphoric). (0~1)\nTempo: The overall estimated tempo of a track in beats per minute (BPM). (±50~200)*/ // LOGIC WORKSSS RECURSION\nvar Moods_getplaylists=/*#__PURE__*/function(){var _ref=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(playlists,limit,offset){var newOffset,newPlaylist;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:newOffset=offset+limit;_context.next=3;return spotifyApi.getUserPlaylists({limit:limit,offset:offset}).then(function(response){if(response){console.log(response);newPlaylist=[].concat(Object(toConsumableArray[\"a\" /* default */])(playlists),Object(toConsumableArray[\"a\" /* default */])(response.items));if(response.next){newPlaylist=Moods_getplaylists(newPlaylist,limit,newOffset);}}}).catch(function(){spotifyAPI_getAccessToken();});case 3:return _context.abrupt(\"return\",newPlaylist);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getplaylists(_x,_x2,_x3){return _ref.apply(this,arguments);};}();var Moods_getTrackfromPlaylist=/*#__PURE__*/function(){var _ref2=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee2(playlistId,tracks,limit,offset){var newOffset,newTrack;return regenerator_default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:newOffset=offset+limit;_context2.next=3;return spotifyApi.getPlaylistTracks(token,playlistId,{limit:limit,offset:offset}).then(function(response){if(response){newTrack=[].concat(Object(toConsumableArray[\"a\" /* default */])(tracks),Object(toConsumableArray[\"a\" /* default */])(response.items));if(response.next){newTrack=Moods_getTrackfromPlaylist(playlistId,newTrack,limit,newOffset);}}});case 3:return _context2.abrupt(\"return\",newTrack);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function getTrackfromPlaylist(_x4,_x5,_x6,_x7){return _ref2.apply(this,arguments);};}();var Moods_getAllSongs=function getAllSongs(res){var c=Moods_getTrackfromPlaylist(res,[],100,0).then(function(response){if(response){return response.map(function(x){return x.track.id;});//response.map(x => x.track.id)\n}});return c;};function arraySplice(array,size){var a=array;var spliced=[];if(array){while(a.length){spliced=[].concat(Object(toConsumableArray[\"a\" /* default */])(spliced),[a.splice(0,size)]);}}return spliced;}var Moods_Moods=function Moods(){var _useState=Object(react[\"useState\"])(),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),audioFet=_useState2[0],setAudioFet=_useState2[1];var _useState3=Object(react[\"useState\"])(),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),allSongs=_useState4[0],setAllSongs=_useState4[1];var _useState5=Object(react[\"useState\"])(1),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),toggleState=_useState6[0],setToggleState=_useState6[1];var _useState7=Object(react[\"useState\"])(\"sad\"),_useState8=Object(slicedToArray[\"a\" /* default */])(_useState7,2),mood=_useState8[0],setMood=_useState8[1];var _useState9=Object(react[\"useState\"])(),_useState10=Object(slicedToArray[\"a\" /* default */])(_useState9,2),songs=_useState10[0],setSongs=_useState10[1];var _useState11=Object(react[\"useState\"])(),_useState12=Object(slicedToArray[\"a\" /* default */])(_useState11,2),tracks=_useState12[0],setTracks=_useState12[1];var audio_feat=JSON.parse(window.sessionStorage.getItem(\"audio_features\"));var trackstorage=JSON.parse(window.sessionStorage.getItem(\"tracks\"));var getTracksfromList=/*#__PURE__*/function(){var _ref3=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee3(arraysplice){var Tracks,i,c;return regenerator_default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:Tracks={tracks:[]};i=0;case 2:if(!(i<arraysplice.length)){_context3.next=10;break;}_context3.next=5;return spotifyApi.getTracks(arraysplice[i].map(function(x){return x.id;}));case 5:c=_context3.sent;Tracks.tracks=[].concat(Object(toConsumableArray[\"a\" /* default */])(Tracks.tracks),Object(toConsumableArray[\"a\" /* default */])(c.tracks));case 7:i++;_context3.next=2;break;case 10:setTracks(Tracks);case 11:case\"end\":return _context3.stop();}}},_callee3);}));return function getTracksfromList(_x8){return _ref3.apply(this,arguments);};}();// get every songs form every playlist and every saved\nvar toggleTab=function toggleTab(index,moods){console.log(audioFet);if(moods!=mood){setTracks();}setMood(moods);setToggleState(index);};Object(react[\"useEffect\"])(function(){if(!trackstorage){var _fetchData=/*#__PURE__*/function(){var _ref4=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee5(){var all_songs;return regenerator_default.a.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:all_songs=[];_context5.next=3;return Moods_getplaylists([],50,0).then(/*#__PURE__*/function(){var _ref5=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee4(response){var _iteratorAbruptCompletion,_didIteratorError,_iteratorError,_iterator,_step,index,unique;return regenerator_default.a.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:console.log(\"Fetching all songs...\");_iteratorAbruptCompletion=false;_didIteratorError=false;_context4.prev=3;_iterator=Object(asyncIterator[\"a\" /* default */])(response.map(function(x){return x.id;}));case 5:_context4.next=7;return _iterator.next();case 7:if(!(_iteratorAbruptCompletion=!(_step=_context4.sent).done)){_context4.next=20;break;}index=_step.value;_context4.t0=[];_context4.t1=Object(toConsumableArray[\"a\" /* default */])(all_songs);_context4.t2=toConsumableArray[\"a\" /* default */];_context4.next=14;return Moods_getAllSongs(index);case 14:_context4.t3=_context4.sent;_context4.t4=(0,_context4.t2)(_context4.t3);all_songs=_context4.t0.concat.call(_context4.t0,_context4.t1,_context4.t4);case 17:_iteratorAbruptCompletion=false;_context4.next=5;break;case 20:_context4.next=26;break;case 22:_context4.prev=22;_context4.t5=_context4[\"catch\"](3);_didIteratorError=true;_iteratorError=_context4.t5;case 26:_context4.prev=26;_context4.prev=27;if(!(_iteratorAbruptCompletion&&_iterator.return!=null)){_context4.next=31;break;}_context4.next=31;return _iterator.return();case 31:_context4.prev=31;if(!_didIteratorError){_context4.next=34;break;}throw _iteratorError;case 34:return _context4.finish(31);case 35:return _context4.finish(26);case 36:// instead of set state maybe import this from home\n// filter duplicates\nunique=Object(toConsumableArray[\"a\" /* default */])(new Set(all_songs));setAllSongs(unique);window.sessionStorage.setItem(\"tracks\",JSON.stringify(all_songs));case 39:case\"end\":return _context4.stop();}}},_callee4,null,[[3,22,26,36],[27,,31,35]]);}));return function(_x9){return _ref5.apply(this,arguments);};}());case 3:case\"end\":return _context5.stop();}}},_callee5);}));return function _fetchData(){return _ref4.apply(this,arguments);};}();_fetchData();}else{console.log(\"Fetching all songs...\");setAllSongs(trackstorage);}},[]);//console.log(allSongs)\nObject(react[\"useEffect\"])(function(){//console.log(allSongs)\nif(!audio_feat){if(allSongs){var get=/*#__PURE__*/function(){var _ref6=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee6(all_audio){var _iterator2,_step2,index,c;return regenerator_default.a.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_iterator2=Object(createForOfIteratorHelper[\"a\" /* default */])(allSongsSpliced);_context6.prev=1;_iterator2.s();case 3:if((_step2=_iterator2.n()).done){_context6.next=11;break;}index=_step2.value;_context6.next=7;return spotifyApi.getAudioFeaturesForTracks(index);case 7:c=_context6.sent;all_audio=[].concat(Object(toConsumableArray[\"a\" /* default */])(all_audio),Object(toConsumableArray[\"a\" /* default */])(c.audio_features));case 9:_context6.next=3;break;case 11:_context6.next=16;break;case 13:_context6.prev=13;_context6.t0=_context6[\"catch\"](1);_iterator2.e(_context6.t0);case 16:_context6.prev=16;_iterator2.f();return _context6.finish(16);case 19:setAudioFet(all_audio);window.sessionStorage.setItem(\"audio_features\",JSON.stringify(all_audio));case 21:case\"end\":return _context6.stop();}}},_callee6,null,[[1,13,16,19]]);}));return function get(_x10){return _ref6.apply(this,arguments);};}();var all_audio=[];var allSongsSpliced=arraySplice(allSongs,100);console.log(\"Fetching audio data...\");get(all_audio);}}else{console.log(\"Fetching audio data...\");setAudioFet(audio_feat);}},[allSongs]);Object(react[\"useEffect\"])(function(){if(allSongs){setSongs(1);}},[allSongs]);Object(react[\"useEffect\"])(function(){if(audioFet){// TODO ADJUST THE FILTERS\nvar audioFetFix=audioFet.filter(function(x){return x;});// some songs have no audio features\nconsole.log(audioFetFix);if(mood==\"sad\"){console.log(\":(\");var FilteredSplice=arraySplice(audioFetFix.filter(function(x){return x.valence<0.3&&x.energy<0.5&&x.danceability<0.6;}),50);console.log(FilteredSplice);if(FilteredSplice){getTracksfromList(FilteredSplice);}else{alert(\"No matches\");}// SET TRACKS IN THIS LOGIC\n}else if(mood==\"happy\"){console.log(\":)\");var _FilteredSplice=arraySplice(audioFetFix.filter(function(x){return x.tempo>110&&x.speechiness<0.2&&x.energy>0.6&&x.danceability>0.6&&x.valence>0.6;}),50);if(_FilteredSplice){getTracksfromList(_FilteredSplice);}else{alert(\"No matches\");}}else if(mood==\"study\"){console.log(\":/\");var _FilteredSplice2=arraySplice(audioFetFix.filter(function(x){return x.speechiness<0.4&&x.energy<0.55&&x.instrumentalness>0.7;}),50);if(_FilteredSplice2){getTracksfromList(_FilteredSplice2);}else{alert(\"No matches\");}}else if(mood==\"gym (mad)\"){var _FilteredSplice3=arraySplice(audioFetFix.filter(function(x){return x.tempo>130&&x.energy>0.65&&x.acousticness<0.2&&x.liveness>0.1;}),50);if(_FilteredSplice3){getTracksfromList(_FilteredSplice3);}else{alert(\"No matches\");}}}},[mood,audioFet]);console.log(tracks);// NOW FILTER EVERYTHING IN AUDIO FEATURES\n// get audio features of everything, then we find songs less than 30 valence and 50energy, and display top 20\n// AUDIO FEATURES HOOK\n// neeed recursion of this logic\nreturn/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"h1\",{children:[\" \",\"Gather all the songs from all your playlists and find the songs that match your current mood\"]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{children:\" Get All Playlists\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{children:\" Get Only Your Playlists\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:songs?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"container\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"h2\",{children:[\"Songs Discovered: \",audioFet?audioFet.length:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:\"0\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"bloc-tabs\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:toggleState===1?\"tabs active-tabs\":\"tabs\",onClick:function onClick(){return toggleTab(1,\"sad\");},children:\"Sad\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:toggleState===2?\"tabs active-tabs\":\"tabs\",onClick:function onClick(){return toggleTab(2,\"happy\");},children:\"Happy\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:toggleState===3?\"tabs active-tabs\":\"tabs\",onClick:function onClick(){return toggleTab(3,\"study\");},children:\"Study\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:toggleState===4?\"tabs active-tabs\":\"tabs\",onClick:function onClick(){return toggleTab(4,\"gym (mad)\");},children:\"Gym >:(\"})]})]}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:\"Fetching all Songs....\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[\"Songs Found: \",tracks?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:tracks.tracks.length}):0,\" \"]}),audioFet?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"content-tabs\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:toggleState===1?\"content  active-content\":\"content\",children:tracks?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:tracks.tracks.map(function(track,key){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_TrackInfo,{track:track,index:tracks.tracks.indexOf(track)},key);})}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:\"Loading Sad songs :(\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:toggleState===2?\"content  active-content\":\"content\",children:tracks?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:tracks.tracks.map(function(track,key){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_TrackInfo,{track:track,index:tracks.tracks.indexOf(track)},key);})}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:\"Loading Happy Songs :D\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:toggleState===3?\"content  active-content\":\"content\",children:tracks?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:tracks.tracks.map(function(track,key){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_TrackInfo,{track:track,index:tracks.tracks.indexOf(track)},key);})}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:\"Loading Study Songs :/\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:toggleState===4?\"content  active-content\":\"content\",children:tracks?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:tracks.tracks.map(function(track,key){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_TrackInfo,{track:track,index:tracks.tracks.indexOf(track)},key);})}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:\"Loading Gym Songs >:(\"})})]}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:\"Fetching Audio Data...\"})]})/* {tracks.items.map((track, key) => (\n\t\t\t\t\t<TrackInfo key={key} track={track}*/;};/* harmony default export */ var Pages_Moods = (Moods_Moods);\n// EXTERNAL MODULE: ./node_modules/date-fns/esm/format/index.js + 31 modules\nvar format = __webpack_require__(45);\n\n// CONCATENATED MODULE: ./src/Pages/RecentTracks.js\nvar RecentTracks_TableItem=function TableItem(item){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"tr\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"td\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:item.track.uri,className:\"row-link\",children:millisToMinutesAndSeconds(item.track.duration_ms)})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"td\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:item.track.uri,tabIndex:\"-1\",className:\"row-link\",children:item.track.name})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"td\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:item.track.uri,tabIndex:\"-1\",className:\"row-link\",children:item.track.artists.map(function(e){return e.name;}).join(\", \")})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"td\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:item.track.uri,tabIndex:\"-1\",className:\"row-link\",children:Object(format[\"a\" /* default */])(Date.parse(item.played_at),\"dd/MM/yyyy, hh:mma\")})})]},item.played_at);};var RecentTracks_RecentTracks=function RecentTracks(){var _useState=Object(react[\"useState\"])(),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),RecentlyPlayed=_useState2[0],setRecentlyPlayed=_useState2[1];// variable limit? with useeffect to load more maybe on scroll down, limit will change\nObject(react[\"useEffect\"])(function(){spotifyApi.getMyRecentlyPlayedTracks({limit:50}).then(function(response){if(response){console.log(response);setRecentlyPlayed({items:response.items});}}).catch(function(){spotifyAPI_getAccessToken();});},[]);console.log(RecentlyPlayed);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:RecentlyPlayed?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"recently-played\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h2\",{children:\"Recently played tracks\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"table\",{className:\"table\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"thead\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"tr\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"th\",{children:\"Duration\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"th\",{children:\"Track\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"th\",{children:\"Artist(s)\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"th\",{children:\"Played at\"})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"tbody\",{children:RecentlyPlayed.items.map(function(item){return RecentTracks_TableItem(item);})})]})]}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:\"LOADING\"})});};/* harmony default export */ var Pages_RecentTracks = (RecentTracks_RecentTracks);\n// EXTERNAL MODULE: ./node_modules/react-spotify-web-playback/esm/index.js + 31 modules\nvar esm = __webpack_require__(80);\n\n// CONCATENATED MODULE: ./src/Pages/Dashboard.js\nfunction Dashboard(){// TODO: This takes too many requests, remove for now\n/*const [isPlaying, setIsPlaying] = useState(false);\n// Note the spotify web player SDK is in beta so performance is janky\n\nuseEffect(() => {\n\tconst interval = setInterval( async () => {\n\tspotifyApi.getMyCurrentPlaybackState().then((response) => {\n\t\tif (response) {\n\t\tif (response.is_playing) {\n\t\t\tsetIsPlaying(true);\n\t\t}\n\t\t} else if (!response) {\n\t\tsetIsPlaying(false);\n\t\t}\n\t})\n\t.catch(() => {\n\t\tgetAccessToken()\n\t});\n\t}, 7000);\n\treturn () => clearInterval(interval);\n}, [isPlaying]);*/ //return should return, getTOPTRACKS, make playlist\n// DashBoard should tell us our favourite genre based on our top artist\nreturn/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"a\" /* BrowserRouter */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_Navbar,{}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react_router[\"c\" /* Switch */],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Route */],{path:\"/RecentTracks\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Pages_RecentTracks,{})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Route */],{path:\"/logout\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(functions_LogoutButton,{})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Route */],{path:\"/TopTracks\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Pages_TopTracks,{})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Route */],{path:\"/Moods\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Pages_Moods,{})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Route */],{path:\"/\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\",{children:\"Welcome to Spoti-FYI\"})})]})]})});}// ****** NESTED ROUTING\n// CONCATENATED MODULE: ./src/App.js\nfunction App_App(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"App\",children:token?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Dashboard,{}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Login_Login,{})});}/* harmony default export */ var src_App = (App_App);\n// CONCATENATED MODULE: ./src/index.js\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{})}),document.getElementById(\"root\"));\n\n/***/ })\n\n},[[81,1,2]]]);","inputSourceMap":{"version":3,"sources":["/Users/macuser/project/spotify-api-project/client/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/macuser/project/spotify-api-project/client/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/macuser/project/spotify-api-project/client/node_modules/postcss-loader/src/index.js??postcss!/Users/macuser/project/spotify-api-project/client/src/index.css","/Users/macuser/project/spotify-api-project/client/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/macuser/project/spotify-api-project/client/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/macuser/project/spotify-api-project/client/node_modules/postcss-loader/src/index.js??postcss!/Users/macuser/project/spotify-api-project/client/src/App.css","/Users/macuser/project/spotify-api-project/client/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/macuser/project/spotify-api-project/client/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/macuser/project/spotify-api-project/client/node_modules/postcss-loader/src/index.js??postcss!/Users/macuser/project/spotify-api-project/client/src/Pages/Login.css","/Users/macuser/project/spotify-api-project/client/src/Pages/Login.js","/Users/macuser/project/spotify-api-project/client/src/components/functions.js","/Users/macuser/project/spotify-api-project/client/src/components/Navbar.js","/Users/macuser/project/spotify-api-project/client/src/components/spotifyAPI.js","/Users/macuser/project/spotify-api-project/client/src/components/TrackInfo.js","/Users/macuser/project/spotify-api-project/client/src/Pages/TopTracks.js","/Users/macuser/project/spotify-api-project/client/src/components/UserSongs.js","/Users/macuser/project/spotify-api-project/client/src/Pages/Moods.js","/Users/macuser/project/spotify-api-project/client/src/Pages/RecentTracks.js","/Users/macuser/project/spotify-api-project/client/src/Pages/Dashboard.js","/Users/macuser/project/spotify-api-project/client/src/App.js","/Users/macuser/project/spotify-api-project/client/src/index.js"],"names":["SERVER_URL","Login","getHashParams","hashParams","e","r","q","window","location","hash","substring","exec","decodeURIComponent","millisToMinutesAndSeconds","millis","minutes","Math","floor","seconds","toFixed","LogoutButton","localStorage","clear","sessionStorage","replace","useState","loggedOut","setLoggedOut","logout","removeItem","Navbar","fontWeight","color","float","EXPIRATION_TIME","SERVER","spotifyApi","SpotifyWebApi","refreshAccessToken","refresh_token","getItem","axios","get","params","then","res","access_token","data","console","log","setItem","Date","now","reload","catch","getAccessToken","error","tokenExpiry","local_access_token","token","setAccessToken","TrackInfo","track","index","uri","album","images","url","artists","map","name","join","TopTracks","toggleState","setToggleState","tracks","setTracks","timeRange","setTimeRange","changeTerm","newTimeRange","toggleTab","time_range","useEffect","getMyTopTracks","limit","response","items","key","indexOf","getplaylists","playlists","offset","newOffset","getUserPlaylists","newPlaylist","getTrackfromPlaylist","playlistId","getPlaylistTracks","newTrack","getAllSongs","x","id","c","fetchData","all_songs","next","arraySplice","array","size","a","spliced","length","splice","Moods","audioFet","setAudioFet","allSongs","setAllSongs","mood","setMood","songs","setSongs","audio_feat","JSON","parse","trackstorage","getTracksfromList","arraysplice","Tracks","i","getTracks","moods","unique","Set","stringify","all_audio","allSongsSpliced","getAudioFeaturesForTracks","audio_features","audioFetFix","filter","FilteredSplice","valence","energy","danceability","alert","tempo","speechiness","instrumentalness","acousticness","liveness","TableItem","item","duration_ms","format","played_at","RecentTracks","RecentlyPlayed","setRecentlyPlayed","getMyRecentlyPlayedTracks","Dashboard","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","import React from \"react\";\nimport \"./Login.css\";\n\nconst SERVER_URL = \"https://react-express-spotify.herokuapp.com/login\"; // https://react-express-spotify.herokuapp.com/login http://localhost:8888/login\n\nexport default function Login() {\nreturn (\n\t<div className=\"login\">\n\n\t<p>\n\t\tAn insight into your listening habits on Spotify\n\t</p>\n\t<a href={SERVER_URL}> Login to Spotify </a>\n\t</div>\n);\n}\n","import React, { useState } from \"react\";\n\n// gets hash parameters\nexport function getHashParams() {\n\tvar hashParams = {};\n\tvar e,\n\t\tr = /([^&;=]+)=?([^&;]*)/g,\n\t\tq = window.location.hash.substring(1);\n\te = r.exec(q);\n\twhile (e) {\n\t\thashParams[e[1]] = decodeURIComponent(e[2]);\n\t\te = r.exec(q);\n\t}\n\n\treturn hashParams;\n}\n\nexport function millisToMinutesAndSeconds(millis) {\n\tvar minutes = Math.floor(millis / 60000);\n\tvar seconds = ((millis % 60000) / 1000).toFixed(0);\n\treturn minutes + \":\" + (seconds < 10 ? \"0\" : \"\") + seconds;\n}\n\n\nexport const LogoutButton = () => {\n\twindow.localStorage.clear();\n\twindow.sessionStorage.clear();\n\twindow.location.replace(\"/\");\n\tconst [loggedOut, setLoggedOut] = useState(false);\n\n\tconst logout = () => {\n\t\tlocalStorage.removeItem(\"whpf_user\");\n\t\tsetLoggedOut(true);\n\t};\n\n\tif (loggedOut) {\n\t\treturn <Redirect to=\"/\" push={true} />;\n\t}\n\n\treturn <Button onClick={logout}>LogOut</Button>;\n};\n","import React from \"react\";\nimport { NavLink } from \"react-router-dom\";\n\nconst Navbar = () => {\n\treturn (\n\t\t<div className=\"navbar\">\n\t\t<li>\n\t\t\t<NavLink to=\"/\">HOME</NavLink>\n\t\t</li>\n\t\t<li>\n\t\t\t<NavLink\n\t\t\tto=\"/TopTracks\"\n\t\t\tactiveStyle={{\n\t\t\t\tfontWeight: \"bold\",\n\t\t\t\tcolor: \"green\",\n\t\t\t}}\n\t\t\t>\n\t\t\tTop Tracks\n\t\t\t</NavLink>\n\t\t</li>\n\t\t<li>\n\t\t\t<NavLink\n\t\t\tto=\"/RecentTracks\"\n\t\t\tactiveStyle={{\n\t\t\t\tfontWeight: \"bold\",\n\t\t\t\tcolor: \"green\",\n\t\t\t}}\n\t\t\t>\n\t\t\tRecentlyPlayed\n\t\t\t</NavLink>\n\t\t</li>\n\t\t<li>\n\t\t\t<NavLink\n\t\t\tto=\"/Moods\"\n\t\t\tactiveStyle={{\n\t\t\t\tfontWeight: \"bold\",\n\t\t\t\tcolor: \"green\",\n\t\t\t}}\n\t\t\t>\n\t\t\tMoods\n\t\t\t</NavLink>\n\t\t</li>\n\t\t<li style={{ float: \"right\" }}>\n\t\n\t\t\t<NavLink to=\"/logout\">Logout</NavLink>\n\t\t</li>\n\t\t</div>\n\t);\n};\n\nexport default Navbar;\n","import axios from \"axios\";\nimport { getHashParams, getObject, setObject } from \"./functions\";\nimport SpotifyWebApi from \"spotify-web-api-js\";\n\nconst EXPIRATION_TIME = 3600000; // 1 hour\nconst SERVER = \"https://react-express-spotify.herokuapp.com/\"; // or https://react-express-spotify.herokuapp.com http://localhost:8888\n//REFRESH ACCESS TOKEN EVERY 1 HOUR\n// REFRESH_URI\n\n// USES JMPerez's spotify-web-api-js\n\nexport const spotifyApi = new SpotifyWebApi();\n\n// constantly refreshing\nexport const refreshAccessToken = async () => {\n// take refresh token from local storage\n\tconst refresh_token = window.localStorage.getItem(\"refresh_token\");\n\taxios\n\t\t.get(SERVER + \"refresh_token\", {\n\t\tparams: {\n\t\t\trefresh_token: refresh_token,\n\t\t},\n\t\t})\n\t\t.then((res) => {\n\t\tconst access_token = res.data.access_token;\n\t\tconsole.log(\"New acccess_token\", access_token);\n\t\twindow.localStorage.setItem(\"access_token\", access_token);\n\t\twindow.localStorage.setItem(\"token_timestamp\", Date.now());\n\t\twindow.location.reload();\n\t\t})\n\t\t.catch((e) => console.log(e));\n};\n\n// GET TOKEN, REFRESH IF REQUIRED\nexport const getAccessToken = () => {\n// Takes token from our url\n\n\tconst { error, access_token, refresh_token } = getHashParams();\n\n\t//  token invalid freom timeout\n\tif (error) {\n\t\tconsole.log(error);\n\t\trefreshAccessToken();\n\t}\n\n\tif (access_token && refresh_token) {\n\t\twindow.location.replace(\"/\");\n\t\twindow.localStorage.setItem(\"access_token\", access_token);\n\t\twindow.localStorage.setItem(\"refresh_token\", refresh_token);\n\t\twindow.localStorage.setItem(\"token_timestamp\", Date.now());\n\n\t\treturn access_token;\n\t}\n\t// THIS WILL AUTO REFRESH OUR TOKEN BASED ON EXPIRY TIME\n\tconst tokenExpiry = window.localStorage.getItem(\"token_timestamp\");\n\n\tif (\n\t\ttokenExpiry &&\n\t\ttokenExpiry !== \"undefined\" &&\n\t\tDate.now() - tokenExpiry > EXPIRATION_TIME\n\t) {\n\t\tconsole.log(\"Token expired, refreshing token\");\n\t\trefreshAccessToken();\n\t}\n\n\tconst local_access_token = window.localStorage.getItem(\"access_token\");\n\n\treturn local_access_token;\n};\n\n// SET OUR TOKEN with our spotify-web-api-js\nexport const token = getAccessToken();\n\nspotifyApi.setAccessToken(token);\n","import React from \"react\";\n\n// our track card for displaying artist, trackname and the picture\nconst TrackInfo = ({ track, index }) => {\n\treturn (\n\t\t<a className=\"TrackInfoLink\" href={track.uri}>\n\t\t<div className=\"card\">\n\t\t\t<img src={track.album.images[1].url} alt=\"Track\" />\n\t\t\t<div className=\"containerCard\">\n\t\t\t\t\n\t\t\t<h4>\n\t\t\t<p>{index + 1}</p>\n\t\t\t\t<b>{track.artists.map((e) => e.name).join(\", \")}</b>\n\t\t\t</h4>\n\t\t\t<p>{track.name}</p>\n\t\t\t</div>\n\t\t</div>\n\t\t</a>\n\t);\n};\n\nexport default TrackInfo;\n","import React, { useState, useEffect } from \"react\";\nimport { spotifyApi, getAccessToken } from \"../components/spotifyAPI\";\nimport TrackInfo from \"../components/TrackInfo\";\n\nconst TopTracks = () => {\n  \tconst [toggleState, setToggleState] = useState(1);\n\n\tconst [tracks, setTracks] = useState();\n\tconst [timeRange, setTimeRange] = useState(\"short_term\");\n\n  \tconst changeTerm = (newTimeRange) => {\n\t\tif (newTimeRange != timeRange) {\n\t\t\tsetTracks()\n\t\t}\n\t\tsetTimeRange(newTimeRange);\n\t};\n\tconst toggleTab = (index, time_range) => {\n\t\tchangeTerm(time_range);\n\t\tsetToggleState(index);\n\t};\n  \tuseEffect(() => {\n\t\tspotifyApi\n\t\t.getMyTopTracks({\n\t\t\tlimit: 50,\n\t\t\ttime_range: timeRange,\n\t\t})\n\t\t.then((response) => {\n\t\t\tif (response) {\n\t\t\tconsole.log(response);\n\t\t\tsetTracks({\n\t\t\t\titems: response.items,\n\t\t\t});\n\t\n\t\t\t}\n\t\t})\n\t\t.catch(() => {\n\t\t\tgetAccessToken();\n\t\t});\n\t}, [timeRange]);\n\n\treturn (\n\t\t<div>\n\t\t<h2>Top Tracks</h2>\n\n\t\t<div className=\"container\">\n\t\t\t<div className=\"bloc-tabs\">\n\t\t\t<button\n\t\t\t\tclassName={toggleState === 1 ? \"tabs active-tabs\" : \"tabs\"}\n\t\t\t\tonClick={() => toggleTab(1, \"short_term\")}\n\t\t\t>\n\t\t\t\t4 weeks\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclassName={toggleState === 2 ? \"tabs active-tabs\" : \"tabs\"}\n\t\t\t\tonClick={() => toggleTab(2, \"medium_term\")}\n\t\t\t>\n\t\t\t\t6 months\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclassName={toggleState === 3 ? \"tabs active-tabs\" : \"tabs\"}\n\t\t\t\tonClick={() => toggleTab(3, \"long_term\")}\n\t\t\t>\n\t\t\t\tAll time\n\t\t\t</button>\n\t\t\t</div>\n\t\t\t{tracks ? (\n\t\t\t<div className=\"content-tabs\">\n\t\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\ttoggleState === 1 ? \"content  active-content\" : \"content\"\n\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t{tracks.items.map((track, key) => (\n\t\t\t\t\t<TrackInfo key={key} track={track} index={tracks.items.indexOf(track)} />\n\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\ttoggleState === 2 ? \"content  active-content\" : \"content\"\n\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t{tracks.items.map((track, key) => (\n\t\t\t\t\t<TrackInfo key={key} track={track} index={tracks.items.indexOf(track)} />\n\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\ttoggleState === 3 ? \"content  active-content\" : \"content\"\n\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t{tracks.items.map((track, key) => (\n\t\t\t\t\t<TrackInfo key={key} track={track} index={tracks.items.indexOf(track)}  />\n\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t) : (\n\t\t\t<b>LOADING</b>\n\t\t\t)}\n\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default TopTracks;\n","import TrackInfo from \"../components/TrackInfo\";\nimport React, { useState, useEffect } from \"react\";\nimport { spotifyApi, token, getAccessToken } from \"../components/spotifyAPI\";\n\n\n\nconst getplaylists = async (playlists, limit, offset) => {\n    const newOffset = offset + limit\n    var newPlaylist\n    await spotifyApi.getUserPlaylists({\n        limit: limit,\n        offset: offset,\n    }).then((response) => {\n        if (response) {\n            newPlaylist = [...playlists, ...response.items] ;\n            /*if (response.next) {\n                newPlaylist = getplaylists(newPlaylist, limit, newOffset)\n            } */\n        }\n    }).catch(() => {\n        getAccessToken()\n    })\n    return newPlaylist\n}\n\nconst getTrackfromPlaylist = async (playlistId, tracks, limit, offset) => {\n    const newOffset = offset + limit\n    var newTrack\n    await spotifyApi.getPlaylistTracks(\n        token,\n        playlistId,\n        {limit: limit,\n        offset: offset,}).then((response) => {\n        if (response) {\n            newTrack = [...tracks, ...response.items] ;\n            /*if (response.next) {\n                newTrack = getTrackfromPlaylist(playlistId, newTrack, limit, newOffset)\n            } */\n        }\n    })\n\n    return newTrack // AFTER THIS ARRAY.JOIN THEM ALL TO GET ALL THE track IDS WE NEED\n}\n\nconst getAllSongs = async (res) => {\n    const c = await getTrackfromPlaylist(res,[],100,0).then( (response) => {\n        if (response) { \n            return response.map(x => x.track.id) \n        }\n    })\n\n    return c\n}\n\nexport default async function fetchData() {\n    return await getplaylists([],50,0).then(\n        async (response) => {\n            var all_songs = []\n            for (const index of response.map(x => x.id)) {\n                all_songs = [...all_songs, ...await getAllSongs(index)]\n            }\n            // instead of set state maybe import this from home\n            return all_songs\n    })  \n}\n\n\n\n ","import TrackInfo from \"../components/TrackInfo\";\nimport React, { useState, useEffect } from \"react\";\nimport { spotifyApi, token, getAccessToken } from \"../components/spotifyAPI\";\nimport fetchData from \"../components/UserSongs\";\n// CHOOSE YOUR MOODS: SAD, GYM, GROOVY(DANCE), HAPPY, STUDY, chill glad\n// GET AUDIOFEATURES OF SEVERAL TRACKS\n// GET ALL TRACKS FROM PLAYLIST, THEN ALL TRACJKS FROM SAVED\n\n// Find the best songs to fit your mood from your playlists:\n// sad songs: energy : less than 0.5 happy songs have more energy and dancibility VALENCE HIGH HAPPY LOW SAD\n// study songs have high instrumentals low speechiness\n\n/*\nDanceability: The degree of how suitable a track is for dancing based on tempo, rhythm stability, beat strength, and overall regularity. (0~1)\nEnergy: The perceptual measure of intensity based on dynamic range, perceived loudness, timbre, onset rate, and general entropy. (0~1)\nKey: The estimated overall pitch class of the track and its type of scale from which its melodic content is derived.\nLoudness: The quality of a sound that is the primary psychological correlate of amplitude in decibel. (-60~0)\nSpeechiness: The presence of spoken words in a track. (0~1)\nAcousticness: The confidence measure whether the track is acoustic. (0~1)\nLiveness: The presence of an audience in the recording. Higher liveness values represent an increased probability that the track was performed live. (0~1)\nValence: The musical positiveness conveyed by a track (e.g. happy, cheerful, euphoric). (0~1)\nTempo: The overall estimated tempo of a track in beats per minute (BPM). (±50~200)*/\n\n// LOGIC WORKSSS RECURSION\nconst getplaylists = async (playlists, limit, offset) => {\n\tconst newOffset = offset + limit;\n\tvar newPlaylist;\n\tawait spotifyApi\n\t.getUserPlaylists({\n\t\tlimit: limit,\n\t\toffset: offset,\n\t\t})\n\t\t.then((response) => {\n\t\tif (response) {\n\t\t\tconsole.log(response)\n\t\t\tnewPlaylist = [...playlists, ...response.items];\n\t\t\tif (response.next) {\n\t\t\tnewPlaylist = getplaylists(newPlaylist, limit, newOffset);\n\t\t\t}\n\t\t}\n\t\t})\n\t\t.catch(() => {\n\t\tgetAccessToken();\n\t});\n\treturn newPlaylist;\n};\n\nconst getTrackfromPlaylist = async (playlistId, tracks, limit, offset) => {\n\tconst newOffset = offset + limit;\n\tvar newTrack;\n\tawait spotifyApi\n\t\t.getPlaylistTracks(token, playlistId, { limit: limit, offset: offset })\n\t\t.then((response) => {\n\t\tif (response) {\n\t\t\tnewTrack = [...tracks, ...response.items];\n\t\t\tif (response.next) {\n\t\t\tnewTrack = getTrackfromPlaylist(\n\t\t\t\tplaylistId,\n\t\t\t\tnewTrack,\n\t\t\t\tlimit,\n\t\t\t\tnewOffset\n\t\t\t);\n\t\t\t}\n\t\t}\n\t\t});\n\n\treturn newTrack; // AFTER THIS ARRAY.JOIN THEM ALL TO GET ALL THE track IDS WE NEED\n};\n\n\n\nconst getAllSongs = (res) => {\n\tconst c = getTrackfromPlaylist(res, [], 100, 0).then((response) => {\n\t\tif (response) {\n\t\treturn response.map((x) => x.track.id);\n\t\t//response.map(x => x.track.id)\n\t\t}\n\t});\n\n\treturn c;\n};\n\nfunction arraySplice(array, size) {\n\tvar a = array;\n\tvar spliced = [];\n\tif (array) {\n\t\twhile (a.length) {\n\t\tspliced = [...spliced, a.splice(0, size)];\n\t\t}\n\t}\n\treturn spliced;\n\t}\n\nconst Moods = () => {\n\tconst [audioFet, setAudioFet] = useState();\n\tconst [allSongs, setAllSongs] = useState();\n\tconst [toggleState, setToggleState] = useState(1);\n\tconst [mood, setMood] = useState(\"sad\");\n\tconst [songs, setSongs] = useState();\n\n\tconst [tracks, setTracks] = useState();\n\n\tvar audio_feat = JSON.parse(window.sessionStorage.getItem(\"audio_features\"));\n\tvar trackstorage = JSON.parse(window.sessionStorage.getItem(\"tracks\"));\n\n\n\tconst getTracksfromList = async (arraysplice) => {\n\n\t\tvar Tracks = {tracks: []}\n\t\n\t\tfor (var i = 0; i < arraysplice.length; i++) {\n\t\t\tconst c = await spotifyApi.getTracks(arraysplice[i].map((x) => x.id))\n\t\t\tTracks.tracks = [...Tracks.tracks, ...c.tracks]\n\t\t}\n\t\tsetTracks(Tracks)\n\t}\n\n\t// get every songs form every playlist and every saved\n\n\tconst toggleTab = (index, moods) => {\n\t\tconsole.log(audioFet);\n\t\tif (moods != mood) {\n\t\t\tsetTracks();\n\t\t}\n\n\t\tsetMood(moods);\n\t\tsetToggleState(index);\n\t};\n\n\tuseEffect(() => {\n\t\tif (!trackstorage) {\n\t\tasync function fetchData() {\n\t\t\tvar all_songs = [];\n\t\t\tawait getplaylists([], 50, 0).then(async (response) => {\n\t\t\tconsole.log(\"Fetching all songs...\");\n\n\t\t\t\tfor await (const index of response.map((x) => x.id)) {\n\t\t\t\t\tall_songs = [...all_songs, ...(await getAllSongs(index))];\n\t\t\t\t}\n\n\t\t\t\t// instead of set state maybe import this from home\n\t\t\t\t// filter duplicates\n\t\t\t\tconst unique = [...new Set(all_songs)]\n\t\t\t\tsetAllSongs(unique);\n\t\t\t\twindow.sessionStorage.setItem(\"tracks\", JSON.stringify(all_songs));\n\t\t\t});\n\t\t}\n\t\tfetchData();\n\t\t} else {\n\t\tconsole.log(\"Fetching all songs...\");\n\t\tsetAllSongs(trackstorage);\n\t\t}\n\t}, []);\n\t//console.log(allSongs)\n\n\tuseEffect(() => {\n\t\t//console.log(allSongs)\n\t\tif (!audio_feat) {\n\t\t\tif (allSongs) {\n\t\t\t\tvar all_audio = [];\n\n\t\t\t\tconst allSongsSpliced = arraySplice(allSongs, 100);\n\n\t\t\t\tasync function get(all_audio) {\n\t\t\t\t\tfor (const index of allSongsSpliced) {\n\t\t\t\t\t\tconst c = await spotifyApi.getAudioFeaturesForTracks(index);\n\t\t\t\t\t\tall_audio = [...all_audio, ...c.audio_features];\n\t\t\t\t\t}\n\t\t\t\t\tsetAudioFet(all_audio);\n\t\t\t\t\twindow.sessionStorage.setItem(\n\t\t\t\t\t\t\"audio_features\",\n\t\t\t\t\t\tJSON.stringify(all_audio)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tconsole.log(\"Fetching audio data...\");\n\t\t\t\tget(all_audio);\n\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.log(\"Fetching audio data...\");\n\t\t\t\tsetAudioFet(audio_feat);\n\t\t\t}\n\t}, [allSongs]);\n\n\tuseEffect(() => {\n\t\tif (allSongs) {\n\t\tsetSongs(1);\n\t\t}\n\t}, [allSongs]);\n\n\tuseEffect(() => {\n\t\tif (audioFet) {\n\t\t// TODO ADJUST THE FILTERS\n\n\t\t\tconst audioFetFix = audioFet.filter((x) => x); // some songs have no audio features\n\t\t\tconsole.log(audioFetFix);\n\t\t\tif (mood == \"sad\") {\n\t\t\t\tconsole.log(\":(\");\n\t\t\t\tconst FilteredSplice = arraySplice(audioFetFix.filter((x) => x.valence < 0.3 && x.energy < 0.5 && x.danceability < 0.6), 50);\n\t\t\t\tconsole.log(FilteredSplice)\n\t\t\t\tif (FilteredSplice) {\n\t\t\t\t\tgetTracksfromList(FilteredSplice)\n\n\t\t\t\t} else {\n\t\t\t\t\talert(\"No matches\")\n\t\t\t\t}\n\t\t\t\t// SET TRACKS IN THIS LOGIC\n\t\t\t} else if (mood == \"happy\") {\n\t\t\t\tconsole.log(\":)\");\n\t\t\t\tconst FilteredSplice = arraySplice( audioFetFix.filter((x) => x.tempo > 110 && x.speechiness < 0.2 && x.energy > 0.6 && x.danceability > 0.6 && x.valence > 0.6),50);\n\t\t\t\tif (FilteredSplice) {\n\t\t\t\t\tgetTracksfromList(FilteredSplice)\n\t\t\t\t} else {\n\t\t\t\t\talert(\"No matches\")\n\t\t\t\t}\n\t\t\t} else if (mood == \"study\") {\n\t\t\t\tconsole.log(\":/\");\n\t\t\t\tconst FilteredSplice = arraySplice(audioFetFix.filter((x) =>  x.speechiness < 0.4 && x.energy < 0.55 && x.instrumentalness > 0.7), 50);\n\t\t\t\tif (FilteredSplice) {\n\t\t\t\t\tgetTracksfromList(FilteredSplice)\n\t\t\t\t} else {\n\t\t\t\t\talert(\"No matches\")\n\t\t\t\t}\n\t\t\t} else if (mood == \"gym (mad)\") {\n\t\t\t\tconst FilteredSplice = arraySplice(audioFetFix.filter((x) => x.tempo > 130 && x.energy > 0.65 && x.acousticness < 0.2 && x.liveness > 0.1), 50);\n\t\t\t\tif (FilteredSplice) {\n\t\t\t\t\tgetTracksfromList(FilteredSplice)\n\t\t\t\t} else {\n\t\t\t\t\talert(\"No matches\")\n\t\t\t\t}\n\n\n\t\t\t}\n\t\t}\n\t}, [mood, audioFet]);\n\tconsole.log(tracks);\n\n\t// NOW FILTER EVERYTHING IN AUDIO FEATURES\n\n\t// get audio features of everything, then we find songs less than 30 valence and 50energy, and display top 20\n\n\t// AUDIO FEATURES HOOK\n\n\t// neeed recursion of this logic\n\n\treturn (\n\t\t<>\n\t\t<h1>\n\t\t\t{\" \"}\n\t\t\tGather all the songs from all your playlists and find the songs that match your current mood\n\t\t</h1>\n\t\t<button> Get All Playlists</button>\n\t\t<button> Get Only Your Playlists</button>\n\t\t<div>\n\t\t\t{songs ? (\n\t\t\t<div className=\"container\">\n\t\t\t\t<h2>Songs Discovered: {audioFet ? audioFet.length : <>0</>}</h2>\n\t\t\t\t<div className=\"bloc-tabs\">\n\t\t\t\t<button\n\t\t\t\t\tclassName={toggleState === 1 ? \"tabs active-tabs\" : \"tabs\"}\n\t\t\t\t\tonClick={() => toggleTab(1, \"sad\")}\n\t\t\t\t>\n\t\t\t\t\tSad\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tclassName={toggleState === 2 ? \"tabs active-tabs\" : \"tabs\"}\n\t\t\t\t\tonClick={() => toggleTab(2, \"happy\")}\n\t\t\t\t>\n\t\t\t\t\tHappy\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tclassName={toggleState === 3 ? \"tabs active-tabs\" : \"tabs\"}\n\t\t\t\t\tonClick={() => toggleTab(3, \"study\")}\n\t\t\t\t>\n\t\t\t\t\tStudy\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tclassName={toggleState === 4 ? \"tabs active-tabs\" : \"tabs\"}\n\t\t\t\t\tonClick={() => toggleTab(4, \"gym (mad)\")}\n\t\t\t\t>\n\t\t\t\t\tGym >:(\n\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t) : (\n\t\t\t<b>Fetching all Songs....</b>\n\t\t\t)}\n\t\t</div>\n\t\t\t\t<p>Songs Found: {tracks? <>{tracks.tracks.length}</> : 0} </p>\n\t\t{audioFet ? (\n\t\t\t<div className=\"content-tabs\">\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\ttoggleState === 1 ? \"content  active-content\" : \"content\"\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t{tracks ? (\n\t\t\t\t<>\n\t\t\t\t\t{tracks.tracks.map((track, key) => (\n\t\t\t\t\t<TrackInfo key={key} track={track} index={tracks.tracks.indexOf(track)} />\n\t\t\t\t\t))}\n\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t<p>Loading Sad songs :(</p>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\ttoggleState === 2 ? \"content  active-content\" : \"content\"\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t{tracks ? (\n\t\t\t\t<>\n\t\t\t\t\t{tracks.tracks.map((track, key) => (\n\t\t\t\t\t<TrackInfo key={key} track={track}  index={tracks.tracks.indexOf(track)} />\n\t\t\t\t\t))}\n\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t<p>Loading Happy Songs :D</p>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\ttoggleState === 3 ? \"content  active-content\" : \"content\"\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t{tracks ? (\n\t\t\t\t<>\n\t\t\t\t\t{tracks.tracks.map((track, key) => (\n\t\t\t\t\t<TrackInfo key={key} track={track} index={tracks.tracks.indexOf(track)} />\n\t\t\t\t\t))}\n\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\t<p>Loading Study Songs :/</p>\n\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\ttoggleState === 4 ? \"content  active-content\" : \"content\"\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t{tracks ? (\n\t\t\t\t<>\n\t\t\t\t\t{tracks.tracks.map((track, key) => (\n\t\t\t\t\t<TrackInfo key={key} track={track} index={tracks.tracks.indexOf(track)} />\n\t\t\t\t\t))}\n\t\t\t\t</>\n\t\t\t\t) : (\n\t\t\t\t\t<p>Loading Gym Songs >:(</p>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t</div>\n\t\t) : (\n\t\t\t<b>Fetching Audio Data...</b>\n\t\t)}\n\t\t</>\n\t\t/* {tracks.items.map((track, key) => (\n\t\t\t\t\t<TrackInfo key={key} track={track}*/\n\t);\n};\n\nexport default Moods;\n","import React, { Component, useState, useEffect } from \"react\";\nimport { spotifyApi, getAccessToken } from \"../components/spotifyAPI\";\nimport format from \"date-fns/format\";\nimport { millisToMinutesAndSeconds } from \"../components/functions\";\n\nconst TableItem = (item) => (\n  <tr key={item.played_at}>\n    <td>\n      <a href={item.track.uri} className=\"row-link\">\n        {millisToMinutesAndSeconds(item.track.duration_ms)}\n      </a>\n    </td>\n\n    <td>\n      <a href={item.track.uri} tabIndex=\"-1\" className=\"row-link\">\n        {item.track.name}\n      </a>\n    </td>\n    <td>\n      <a href={item.track.uri} tabIndex=\"-1\" className=\"row-link\">\n        {item.track.artists.map((e) => e.name).join(\", \")}\n      </a>\n    </td>\n    <td>\n      <a href={item.track.uri} tabIndex=\"-1\" className=\"row-link\">\n        {format(Date.parse(item.played_at), \"dd/MM/yyyy, hh:mma\")}\n      </a>\n    </td>\n  </tr>\n);\n\nconst RecentTracks = () => {\n  const [RecentlyPlayed, setRecentlyPlayed] = useState();\n\n  // variable limit? with useeffect to load more maybe on scroll down, limit will change\n  useEffect(() => {\n    spotifyApi\n      .getMyRecentlyPlayedTracks({\n        limit: 50,\n      })\n      .then((response) => {\n        if (response) {\n          console.log(response);\n          setRecentlyPlayed({\n            items: response.items,\n          });\n        }\n      })\n      .catch(() => {\n        getAccessToken();\n      });\n  }, []);\n  console.log(RecentlyPlayed);\n\n  return (\n    <div>\n      {RecentlyPlayed ? (\n        <div className=\"recently-played\">\n          <h2>Recently played tracks</h2>\n\n          <table className=\"table\">\n            <thead>\n              <tr>\n                <th>Duration</th>\n                <th>Track</th>\n                <th>Artist(s)</th>\n                <th>Played at</th>\n              </tr>\n            </thead>\n            <tbody>{RecentlyPlayed.items.map((item) => TableItem(item))}</tbody>\n          </table>\n        </div>\n      ) : (\n        <b>LOADING</b>\n      )}\n    </div>\n  );\n};\nexport default RecentTracks;\n","import React, { useState, useEffect } from \"react\";\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport { LogoutButton } from \"../components/functions\";\nimport Navbar from \"../components/Navbar\";\nimport TopTracks from \"./TopTracks\";\nimport Moods from \"./Moods\";\nimport RecentTracks from \"./RecentTracks\";\nimport SpotifyPlayer from \"react-spotify-web-playback\";\nimport { spotifyApi, token, getAccessToken } from \"../components/spotifyAPI\";\n\n\n\nexport default function Dashboard() {\n// TODO: This takes too many requests, remove for now\n/*const [isPlaying, setIsPlaying] = useState(false);\n// Note the spotify web player SDK is in beta so performance is janky\n\nuseEffect(() => {\n\tconst interval = setInterval( async () => {\n\tspotifyApi.getMyCurrentPlaybackState().then((response) => {\n\t\tif (response) {\n\t\tif (response.is_playing) {\n\t\t\tsetIsPlaying(true);\n\t\t}\n\t\t} else if (!response) {\n\t\tsetIsPlaying(false);\n\t\t}\n\t})\n\t.catch(() => {\n\t\tgetAccessToken()\n\t});\n\t}, 7000);\n\treturn () => clearInterval(interval);\n}, [isPlaying]);*/\n\n//return should return, getTOPTRACKS, make playlist\n// DashBoard should tell us our favourite genre based on our top artist\n\treturn (\n\t\t<BrowserRouter>\n\t\t<div /* will make a header bar FOR ALL OUR BROWSER ROUTES*/>\n\t\t\t<Navbar />\n\n\t\t\t<Switch>\n\t\t\t<Route path=\"/RecentTracks\">\n\t\t\t\t<RecentTracks />\n\t\t\t</Route>\n\t\t\t<Route path=\"/logout\">\n\t\t\t\t<LogoutButton />\n\t\t\t</Route>\n\t\t\t<Route path=\"/TopTracks\">\n\t\t\t\t<TopTracks />\n\t\t\t</Route>\n\t\t\t<Route path=\"/Moods\">\n\t\t\t\t<Moods />\n\t\t\t</Route>\n\t\t\t<Route path=\"/\">\n\t\t\t\t<h1>Welcome to Spoti-FYI</h1>\n\t\t\t</Route>\n\t\t\t</Switch>\n\t\t\t{/*isPlaying ? (\n\t\t\t<div className=\"player\">\n\t\t\t\t<b>Currently Playing</b>\n\t\t\t\t<SpotifyPlayer\n\t\t\t\ttoken={token}\n\t\t\t\tsyncExternalDevice={true}\n\t\t\t\tsyncExternalDeviceInterval={5}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t) : (\n\t\t\t<div className=\"player\">\n\t\t\t\t<b>Currently Not Playing Anything </b>\n\t\t\t</div>\n\t\t\t)*/}\n\t\t</div>\n\t\t</BrowserRouter>\n\t);\n}\n// ****** NESTED ROUTING\n","import React, { Component, useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport Login from \"./Pages/Login\";\nimport Dashboard from \"./Pages/Dashboard\";\n\nimport { token } from \"./components/spotifyAPI\";\n\n\nfunction App() {\n\n  return (\n    <div className=\"App\">{token ? <Dashboard/> : <Login />}</div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"]}}