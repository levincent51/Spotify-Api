{"ast":null,"code":"import _slicedToArray from\"/Users/macuser/project/spotify-api-project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{spotifyApi,getAccessToken}from\"../components/spotifyAPI\";import TrackInfo from\"../components/TrackInfo\";import{CircularProgress}from\"@material-ui/core\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TopTracks=function TopTracks(){var _useState=useState(1),_useState2=_slicedToArray(_useState,2),toggleState=_useState2[0],setToggleState=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),tracks=_useState4[0],setTracks=_useState4[1];var _useState5=useState(\"short_term\"),_useState6=_slicedToArray(_useState5,2),timeRange=_useState6[0],setTimeRange=_useState6[1];var changeTerm=function changeTerm(newTimeRange){if(newTimeRange!=timeRange){setTracks();}setTimeRange(newTimeRange);};var toggleTab=function toggleTab(index,time_range){changeTerm(time_range);setToggleState(index);};useEffect(function(){spotifyApi.getMyTopTracks({limit:50,time_range:timeRange}).then(function(response){if(response){console.log(response);setTracks({items:response.items});}}).catch(function(){getAccessToken();});},[timeRange]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Top Tracks\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bloc-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:toggleState===1?\"tabs active-tabs\":\"tabs\",onClick:function onClick(){return toggleTab(1,\"short_term\");},children:\"4 weeks\"}),/*#__PURE__*/_jsx(\"button\",{className:toggleState===2?\"tabs active-tabs\":\"tabs\",onClick:function onClick(){return toggleTab(2,\"medium_term\");},children:\"6 months\"}),/*#__PURE__*/_jsx(\"button\",{className:toggleState===3?\"tabs active-tabs\":\"tabs\",onClick:function onClick(){return toggleTab(3,\"long_term\");},children:\"All time\"})]}),tracks?/*#__PURE__*/_jsxs(\"div\",{className:\"content-tabs\",children:[/*#__PURE__*/_jsx(\"div\",{className:toggleState===1?\"content  active-content\":\"content\",children:tracks.items.map(function(track,key){return/*#__PURE__*/_jsx(TrackInfo,{track:track,index:tracks.items.indexOf(track)},key);})}),/*#__PURE__*/_jsx(\"div\",{className:toggleState===2?\"content  active-content\":\"content\",children:tracks.items.map(function(track,key){return/*#__PURE__*/_jsx(TrackInfo,{track:track,index:tracks.items.indexOf(track)},key);})}),/*#__PURE__*/_jsx(\"div\",{className:toggleState===3?\"content  active-content\":\"content\",children:tracks.items.map(function(track,key){return/*#__PURE__*/_jsx(TrackInfo,{track:track,index:tracks.items.indexOf(track)},key);})})]}):/*#__PURE__*/_jsx(CircularProgress,{})]})]});};export default TopTracks;","map":{"version":3,"sources":["/Users/macuser/project/spotify-api-project/client/src/Pages/TopTracks.js"],"names":["React","useState","useEffect","spotifyApi","getAccessToken","TrackInfo","CircularProgress","TopTracks","toggleState","setToggleState","tracks","setTracks","timeRange","setTimeRange","changeTerm","newTimeRange","toggleTab","index","time_range","getMyTopTracks","limit","then","response","console","log","items","catch","map","track","key","indexOf"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { spotifyApi, getAccessToken } from \"../components/spotifyAPI\";\nimport TrackInfo from \"../components/TrackInfo\";\nimport { CircularProgress } from \"@material-ui/core\";\n\nconst TopTracks = () => {\n  \tconst [toggleState, setToggleState] = useState(1);\n\n\tconst [tracks, setTracks] = useState();\n\tconst [timeRange, setTimeRange] = useState(\"short_term\");\n\n  \tconst changeTerm = (newTimeRange) => {\n\t\tif (newTimeRange != timeRange) {\n\t\t\tsetTracks()\n\t\t}\n\t\tsetTimeRange(newTimeRange);\n\t};\n\tconst toggleTab = (index, time_range) => {\n\t\tchangeTerm(time_range);\n\t\tsetToggleState(index);\n\t};\n  \tuseEffect(() => {\n\t\tspotifyApi\n\t\t.getMyTopTracks({\n\t\t\tlimit: 50,\n\t\t\ttime_range: timeRange,\n\t\t})\n\t\t.then((response) => {\n\t\t\tif (response) {\n\t\t\tconsole.log(response);\n\t\t\tsetTracks({\n\t\t\t\titems: response.items,\n\t\t\t});\n\t\n\t\t\t}\n\t\t})\n\t\t.catch(() => {\n\t\t\tgetAccessToken();\n\t\t});\n\t}, [timeRange]);\n\n\treturn (\n\t\t<div>\n\t\t<h2>Top Tracks</h2>\n\n\t\t<div className=\"container\">\n\t\t\t<div className=\"bloc-tabs\">\n\t\t\t<button\n\t\t\t\tclassName={toggleState === 1 ? \"tabs active-tabs\" : \"tabs\"}\n\t\t\t\tonClick={() => toggleTab(1, \"short_term\")}\n\t\t\t>\n\t\t\t\t4 weeks\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclassName={toggleState === 2 ? \"tabs active-tabs\" : \"tabs\"}\n\t\t\t\tonClick={() => toggleTab(2, \"medium_term\")}\n\t\t\t>\n\t\t\t\t6 months\n\t\t\t</button>\n\t\t\t<button\n\t\t\t\tclassName={toggleState === 3 ? \"tabs active-tabs\" : \"tabs\"}\n\t\t\t\tonClick={() => toggleTab(3, \"long_term\")}\n\t\t\t>\n\t\t\t\tAll time\n\t\t\t</button>\n\t\t\t</div>\n\t\t\t{tracks ? (\n\t\t\t<div className=\"content-tabs\">\n\t\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\ttoggleState === 1 ? \"content  active-content\" : \"content\"\n\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t{tracks.items.map((track, key) => (\n\t\t\t\t\t<TrackInfo key={key} track={track} index={tracks.items.indexOf(track)} />\n\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\ttoggleState === 2 ? \"content  active-content\" : \"content\"\n\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t{tracks.items.map((track, key) => (\n\t\t\t\t\t<TrackInfo key={key} track={track} index={tracks.items.indexOf(track)} />\n\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\tclassName={\n\t\t\t\t\ttoggleState === 3 ? \"content  active-content\" : \"content\"\n\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t{tracks.items.map((track, key) => (\n\t\t\t\t\t<TrackInfo key={key} track={track} index={tracks.items.indexOf(track)}  />\n\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t) : (\n\t\t\t<CircularProgress/>\n\t\t\t)}\n\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default TopTracks;\n"]},"metadata":{},"sourceType":"module"}