{"version":3,"sources":["Pages/Login.js","components/functions.js","components/Navbar.js","components/spotifyAPI.js","components/TrackInfo.js","Pages/TopTracks.js","Pages/Reccomendations.js","Pages/RecentTracks.js","Pages/Dashboard.js","App.js","index.js"],"names":["Login","className","href","millisToMinutesAndSeconds","millis","minutes","Math","floor","seconds","toFixed","LogoutButton","window","localStorage","clear","location","replace","useState","loggedOut","setLoggedOut","Redirect","to","push","Button","onClick","removeItem","Navbar","activeStyle","fontWeight","color","style","float","spotifyApi","SpotifyWebApi","refreshAccessToken","a","refresh_token","getItem","axios","get","SERVER","params","then","res","access_token","data","console","log","setItem","Date","now","reload","catch","e","getAccessToken","hashParams","r","q","hash","substring","exec","decodeURIComponent","getHashParams","error","tokenExpiry","token","setAccessToken","TrackInfo","track","uri","src","album","images","url","alt","artists","map","name","join","TopTracks","toggleState","setToggleState","tracks","setTracks","timeRange","setTimeRange","toggleTab","index","time_range","newTimeRange","useEffect","getMyTopTracks","limit","response","items","key","getplaylists","playlists","offset","newOffset","getUserPlaylists","newPlaylist","next","getTrackfromPlaylist","playlistId","getPlaylistTracks","newTrack","getAllSongs","x","id","c","Reccommendations","allSongs","setAllSongs","songs","setSongs","all_songs","fetchData","RecentTracks","RecentlyPlayed","setRecentlyPlayed","getMyRecentlyPlayedTracks","item","duration_ms","tabIndex","format","parse","played_at","TableItem","Dashboard","path","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.779f864f.chunk.js","sourcesContent":["import React from \"react\";\nimport \"./Login.css\";\n\nconst SERVER_URL = \"https://react-express-spotify.herokuapp.com/login\";\n\nexport default function Login() {\n  return (\n    <div className=\"login\">\n\n      <p>\n        An insight into your listening habits on Spotify\n      </p>\n      <a href={SERVER_URL}> Login to Spotify </a>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\n\n// gets hash parameters\nexport function getHashParams() {\n  var hashParams = {};\n  var e,\n    r = /([^&;=]+)=?([^&;]*)/g,\n    q = window.location.hash.substring(1);\n  e = r.exec(q);\n  while (e) {\n    hashParams[e[1]] = decodeURIComponent(e[2]);\n    e = r.exec(q);\n  }\n\n  return hashParams;\n}\n\nexport function millisToMinutesAndSeconds(millis) {\n  var minutes = Math.floor(millis / 60000);\n  var seconds = ((millis % 60000) / 1000).toFixed(0);\n  return minutes + \":\" + (seconds < 10 ? \"0\" : \"\") + seconds;\n}\n\n\nexport const LogoutButton = () => {\n  window.localStorage.clear();\n  window.location.replace(\"/\");\n  const [loggedOut, setLoggedOut] = useState(false);\n\n  const logout = () => {\n    localStorage.removeItem(\"whpf_user\");\n    setLoggedOut(true);\n  };\n\n  if (loggedOut) {\n    return <Redirect to=\"/\" push={true} />;\n  }\n\n  return <Button onClick={logout}>LogOut</Button>;\n};\n","import React from \"react\";\nimport { NavLink } from \"react-router-dom\";\n\nconst Navbar = () => {\n  return (\n    <div className=\"navbar\">\n      <li>\n        <NavLink to=\"/\">HOME</NavLink>\n      </li>\n      <li>\n        <NavLink\n          to=\"/TopTracks\"\n          activeStyle={{\n            fontWeight: \"bold\",\n            color: \"green\",\n          }}\n        >\n          Top Tracks\n        </NavLink>\n      </li>\n      <li>\n        <NavLink\n          to=\"/RecentTracks\"\n          activeStyle={{\n            fontWeight: \"bold\",\n            color: \"green\",\n          }}\n        >\n          RecentlyPlayed\n        </NavLink>\n      </li>\n      <li>\n        <NavLink\n          to=\"/Recommendations\"\n          activeStyle={{\n            fontWeight: \"bold\",\n            color: \"green\",\n          }}\n        >\n          Recommendations\n        </NavLink>\n      </li>\n      <li style={{ float: \"right\" }}>\n  \n        <NavLink to=\"/logout\">Logout</NavLink>\n      </li>\n    </div>\n  );\n};\n\nexport default Navbar;\n","import axios from \"axios\";\nimport { getHashParams, getObject, setObject } from \"./functions\";\nimport SpotifyWebApi from \"spotify-web-api-js\";\n\nconst EXPIRATION_TIME = 3600000; // 1 hour\nconst SERVER = \"https://react-express-spotify.herokuapp.com/\"; // or https://react-express-spotify.herokuapp.com http://localhost:8888\n//REFRESH ACCESS TOKEN EVERY 1 HOUR\n// REFRESH_URI\n\n// USES JMPerez's spotify-web-api-js\n\nexport const spotifyApi = new SpotifyWebApi();\n\n// constantly refreshing\nexport const refreshAccessToken = async () => {\n  // take refresh token from local storage\n  const refresh_token = window.localStorage.getItem(\"refresh_token\");\n  axios\n    .get(SERVER + \"refresh_token\", {\n      params: {\n        refresh_token: refresh_token,\n      },\n    })\n    .then((res) => {\n      const access_token = res.data.access_token;\n      console.log(\"New acccess_token\", access_token);\n      window.localStorage.setItem(\"access_token\", access_token);\n      window.localStorage.setItem(\"token_timestamp\", Date.now());\n      window.location.reload();\n    })\n    .catch((e) => console.log(e));\n};\n\n// GET TOKEN, REFRESH IF REQUIRED\nexport const getAccessToken = () => {\n  // Takes token from our url\n\n  const { error, access_token, refresh_token } = getHashParams();\n\n  //  token invalid freom timeout\n  if (error) {\n    console.log(error);\n    refreshAccessToken();\n  }\n\n  if (access_token && refresh_token) {\n    window.location.replace(\"/\");\n    window.localStorage.setItem(\"access_token\", access_token);\n    window.localStorage.setItem(\"refresh_token\", refresh_token);\n    window.localStorage.setItem(\"token_timestamp\", Date.now());\n\n    return access_token;\n  }\n  // THIS WILL AUTO REFRESH OUR TOKEN BASED ON EXPIRY TIME\n  const tokenExpiry = window.localStorage.getItem(\"token_timestamp\");\n\n  if (\n    tokenExpiry &&\n    tokenExpiry !== \"undefined\" &&\n    Date.now() - tokenExpiry > EXPIRATION_TIME\n  ) {\n    console.log(\"Token expired, refreshing token\");\n    refreshAccessToken();\n  }\n\n  const local_access_token = window.localStorage.getItem(\"access_token\");\n\n  return local_access_token;\n};\n\n// SET OUR TOKEN with our spotify-web-api-js\nexport const token = getAccessToken();\n\nspotifyApi.setAccessToken(token);\n","import React from \"react\";\n\n// our track card for displaying artist, trackname and the picture\nconst TrackInfo = ({ track }) => {\n  return (\n    <a className=\"TrackInfoLink\" href={track.uri}>\n      <div className=\"card\">\n        <img src={track.album.images[1].url} alt=\"Track\" />\n        <div className=\"containerCard\">\n          <h4>\n            <b>{track.artists.map((e) => e.name).join(\", \")}</b>\n          </h4>\n          <p>{track.name}</p>\n        </div>\n      </div>\n    </a>\n  );\n};\n\nexport default TrackInfo;\n","import React, { useState, useEffect } from \"react\";\nimport { spotifyApi, getAccessToken } from \"../components/spotifyAPI\";\nimport TrackInfo from \"../components/TrackInfo\";\n\nconst TopTracks = () => {\n  const [toggleState, setToggleState] = useState(1);\n\n  const [tracks, setTracks] = useState();\n  const [timeRange, setTimeRange] = useState(\"short_term\");\n\n  const changeTerm = (newTimeRange) => {\n    setTracks();\n    setTimeRange(newTimeRange);\n  };\n  const toggleTab = (index, time_range) => {\n    changeTerm(time_range);\n    setToggleState(index);\n  };\n  useEffect(() => {\n    spotifyApi\n      .getMyTopTracks({\n        limit: 50,\n        time_range: timeRange,\n      })\n      .then((response) => {\n        if (response) {\n          console.log(response);\n          setTracks({\n            items: response.items,\n          });\n        }\n      })\n      .catch(() => {\n        getAccessToken()\n      });;\n\n  }, [timeRange]);\n\n  return (\n    <div>\n      <h2>Top Tracks</h2>\n\n      <div className=\"container\">\n        <div className=\"bloc-tabs\">\n          <button\n            className={toggleState === 1 ? \"tabs active-tabs\" : \"tabs\"}\n            onClick={() => toggleTab(1, \"short_term\")}\n          >\n            4 weeks\n          </button>\n          <button\n            className={toggleState === 2 ? \"tabs active-tabs\" : \"tabs\"}\n            onClick={() => toggleTab(2, \"medium_term\")}\n          >\n            6 months\n          </button>\n          <button\n            className={toggleState === 3 ? \"tabs active-tabs\" : \"tabs\"}\n            onClick={() => toggleTab(3, \"long_term\")}\n          >\n            All time\n          </button>\n        </div>\n        {tracks ? (\n          <div className=\"content-tabs\">\n            <div\n              className={\n                toggleState === 1 ? \"content  active-content\" : \"content\"\n              }\n            >\n              {tracks.items.map((track, key) => (\n                <TrackInfo key={key} track={track} />\n              ))}\n            </div>\n            <div\n              className={\n                toggleState === 2 ? \"content  active-content\" : \"content\"\n              }\n            >\n              {tracks.items.map((track, key) => (\n                <TrackInfo key={key} track={track} />\n              ))}\n            </div>\n            <div\n              className={\n                toggleState === 3 ? \"content  active-content\" : \"content\"\n              }\n            >\n              {tracks.items.map((track, key) => (\n                <TrackInfo key={key} track={track} />\n              ))}\n            </div>\n          </div>\n        ) : (\n\n          <b>LOADING</b>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default TopTracks;\n","import TrackInfo from \"../components/TrackInfo\";\nimport React, { useState, useEffect } from \"react\";\nimport { spotifyApi, token, getAccessToken } from \"../components/spotifyAPI\";\nimport fetchData from \"../components/UserSongs\";\n// CHOOSE YOUR MOODS: SAD, GYM, GROOVY(DANCE), HAPPY, STUDY, chill glad\n// GET AUDIOFEATURES OF SEVERAL TRACKS\n// GET ALL TRACKS FROM PLAYLIST, THEN ALL TRACJKS FROM SAVED\n\n\n// Find the best songs to fit your mood from your playlists:\n// sad songs: energy : less than 0.5 happy songs have more energy and dancibility VALENCE HIGH HAPPY LOW SAD\n// study songs have high instrumentals low speechiness\n\n/*\nDanceability: The degree of how suitable a track is for dancing based on tempo, rhythm stability, beat strength, and overall regularity. (0~1)\nEnergy: The perceptual measure of intensity based on dynamic range, perceived loudness, timbre, onset rate, and general entropy. (0~1)\nKey: The estimated overall pitch class of the track and its type of scale from which its melodic content is derived.\nLoudness: The quality of a sound that is the primary psychological correlate of amplitude in decibel. (-60~0)\nSpeechiness: The presence of spoken words in a track. (0~1)\nAcousticness: The confidence measure whether the track is acoustic. (0~1)\nLiveness: The presence of an audience in the recording. Higher liveness values represent an increased probability that the track was performed live. (0~1)\nValence: The musical positiveness conveyed by a track (e.g. happy, cheerful, euphoric). (0~1)\nTempo: The overall estimated tempo of a track in beats per minute (BPM). (Â±50~200)*/\n\n// LOGIC WORKSSS RECURSION\nconst getplaylists = async (playlists, limit, offset) => {\n    const newOffset = offset + limit\n    var newPlaylist\n    await spotifyApi.getUserPlaylists({\n        limit: limit,\n        offset: offset,\n    }).then((response) => {\n        if (response) {\n            newPlaylist = [...playlists, ...response.items] ;\n            if (response.next) {\n                newPlaylist = getplaylists(newPlaylist, limit, newOffset)\n            } \n        }\n    }).catch(() => {\n        getAccessToken()\n    })\n    return newPlaylist\n}\n\nconst getTrackfromPlaylist = async (playlistId, tracks, limit, offset) => {\n    const newOffset = offset + limit\n    var newTrack\n    await spotifyApi.getPlaylistTracks(\n        token,\n        playlistId,\n        {limit: limit,\n        offset: offset,}).then((response) => {\n        if (response) {\n            newTrack = [...tracks, ...response.items] ;\n            if (response.next) {\n                newTrack = getTrackfromPlaylist(playlistId, newTrack, limit, newOffset)\n            } \n        }\n    })\n\n    return newTrack // AFTER THIS ARRAY.JOIN THEM ALL TO GET ALL THE track IDS WE NEED\n}\n\nconst getAllSongs = async (res) => {\n    const c = await getTrackfromPlaylist(res,[],100,0).then( (response) => {\n        if (response) { \n            return response.map(x => x.track.id) \n        }\n    })\n\n    return c\n}\n\n\nconst Reccommendations = () => {\n\n\n    const [allSongs, setAllSongs] = useState()\n    const [songs, setSongs] = useState()\n\n    useEffect(() => {\n        \n        async function fetchData() {\n            await getplaylists([],50,0).then(\n                async (response) => {\n                    var all_songs = []\n                    for (const index of response.map(x => x.id)) {\n                        all_songs = [...all_songs, ...await getAllSongs(index)]\n                    }\n                    // instead of set state maybe import this from home\n                    setAllSongs(all_songs)\n            })  \n        }\n        //setAllSongs(fetchData())\n        fetchData()\n\n    }, []);\n    console.log(allSongs)\n\n/*\nconst Reccommendations = () => {\n\n    const [sad, setSad] = useState()\n\n    const [recco, setRecco] = useState()\n\n    const [playlists, setPlaylists] = useState([]);\n    const [addSong, setAddSong] = useState()\n\n    useEffect(() => {\n        getplaylists([],4,0).then(\n            (response) => {\n                var all_songs = []\n                response.map(x => x.id).forEach((res) => {\n                    getTrackfromPlaylist(res,[],4,0).then( (response) => {\n                        if (response) {\n                            all_songs = [...all_songs, ...response.map(x => x.track.id)] \n                            setAddSong(all_songs)\n                        }\n                       \n                    })\n                }) \n            })  \n        \n    }, []);\n*/\n    useEffect(() => {\n        if(allSongs) {\n            setSongs(1)\n            console.log('hiii')\n        }\n\n    }, [allSongs])\n\n\n    /*\n    useEffect(() => {\n        var all_songs = []\n        playlists.forEach((res) => {\n            getTrackfromPlaylist(res,[],3,0).then( (response) => {\n                if (response) {\n                    all_songs = [...all_songs, ...response.map(x => x.track.id)] \n                    setAllSongs(all_songs)\n                }\n            })\n        })\n\n    }, [playlists]);*/\n\n    /* var a = YOUR_ARRAY;\nwhile(a.length) {\n    console.log(a.splice(0,100));\n\n}*/\n    // get audio features of everything, then we find songs less than 30 valence and 50energy, and display top 20\n\n    \n    // AUDIO FEATURES HOOK\n \n    \n\n\n    // Get Audio Features for several tracks max id is 100\n    // getting back our several tracks max id is 50\n\n    //console.log(playlists.map( x => x.id))\n \n\n\n\n    // neeed recursion of this logic\n\n    const [toggleState, setToggleState] = useState(1);\n    // get every songs form every playlist and every saved \n    \n    const changeTerm = (newTimeRange) => {\n    };\n\n    const toggleTab = (index, time_range) => {\n        changeTerm(time_range);\n        setToggleState(index);\n    };\n\n    return (\n        <div>{songs ? (\n            <div className=\"container\">\n            <div className=\"bloc-tabs\">\n              <button\n                className={toggleState === 1 ? \"tabs active-tabs\" : \"tabs\"}\n                onClick={() => toggleTab(1, \"short_term\")}\n              >\n                Sad\n              </button>\n              <button\n                className={toggleState === 2 ? \"tabs active-tabs\" : \"tabs\"}\n                onClick={() => toggleTab(2, \"medium_term\")}\n              >\n                Happy\n              </button>\n              <button\n                className={toggleState === 3 ? \"tabs active-tabs\" : \"tabs\"}\n                onClick={() => toggleTab(3, \"long_term\")}\n              >\n                Study\n              </button>\n            </div>\n            </div>\n        ) : (<b>loading</b>)}</div>\n        /* {tracks.items.map((track, key) => (\n                <TrackInfo key={key} track={track}*/\n    )\n}\n\nexport default Reccommendations","import React, { Component, useState, useEffect } from \"react\";\nimport { spotifyApi, getAccessToken } from \"../components/spotifyAPI\";\nimport format from \"date-fns/format\";\nimport { millisToMinutesAndSeconds } from \"../components/functions\";\n\nconst TableItem = (item) => (\n  <tr key={item.played_at}>\n    <td>\n      <a href={item.track.uri} className=\"row-link\">\n        {millisToMinutesAndSeconds(item.track.duration_ms)}\n      </a>\n    </td>\n\n    <td>\n      <a href={item.track.uri} tabIndex=\"-1\" className=\"row-link\">\n        {item.track.name}\n      </a>\n    </td>\n    <td>\n      <a href={item.track.uri} tabIndex=\"-1\" className=\"row-link\">\n        {item.track.artists.map((e) => e.name).join(\", \")}\n      </a>\n    </td>\n    <td>\n      <a href={item.track.uri} tabIndex=\"-1\" className=\"row-link\">\n        {format(Date.parse(item.played_at), \"dd/MM/yyyy, hh:mma\")}\n      </a>\n    </td>\n  </tr>\n);\n\nconst RecentTracks = () => {\n  const [RecentlyPlayed, setRecentlyPlayed] = useState();\n\n  // variable limit? with useeffect to load more maybe on scroll down, limit will change\n  useEffect(() => {\n    spotifyApi\n      .getMyRecentlyPlayedTracks({\n        limit: 50,\n      })\n      .then((response) => {\n        if (response) {\n          console.log(response);\n          setRecentlyPlayed({\n            items: response.items,\n          });\n        }\n      })\n      .catch(() => {\n        getAccessToken()\n      });;\n  }, []);\n  console.log(RecentlyPlayed);\n\n  return (\n    <div>\n      {RecentlyPlayed ? (\n        <div className=\"recently-played\">\n          <h2>Recently played tracks</h2>\n\n          <table className=\"table\">\n            <thead>\n              <tr>\n                <th>Duration</th>\n                <th>Track</th>\n                <th>Artist(s)</th>\n                <th>Played at</th>\n              </tr>\n            </thead>\n            <tbody>\n              {RecentlyPlayed.items.map((item) =>\n                TableItem(item)\n              )}\n            </tbody>\n          </table>\n        </div>\n      ) : (\n        <b>LOADING</b>\n      )}\n    </div>\n  );\n};\nexport default RecentTracks;\n","import React, { useState, useEffect } from \"react\";\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport { LogoutButton } from \"../components/functions\";\nimport Navbar from \"../components/Navbar\";\nimport TopTracks from \"./TopTracks\";\nimport Reccommendations from \"./Reccomendations\";\nimport RecentTracks from \"./RecentTracks\";\nimport SpotifyPlayer from \"react-spotify-web-playback\";\nimport { spotifyApi, token, getAccessToken } from \"../components/spotifyAPI\";\n\n\nexport default function Dashboard() {\n  // TODO: This takes too many requests, remove for now\n  /*const [isPlaying, setIsPlaying] = useState(false);\n  // Note the spotify web player SDK is in beta so performance is janky\n  \n  useEffect(() => {\n    const interval = setInterval( async () => {\n      spotifyApi.getMyCurrentPlaybackState().then((response) => {\n        if (response) {\n          if (response.is_playing) {\n            setIsPlaying(true);\n          }\n        } else if (!response) {\n          setIsPlaying(false);\n        }\n      })\n      .catch(() => {\n        getAccessToken()\n      });\n    }, 7000);\n    return () => clearInterval(interval);\n  }, [isPlaying]);*/\n\n  //return should return, getTOPTRACKS, make playlist\n  // DashBoard should tell us our favourite genre based on our top artist\n  return (\n    <BrowserRouter>\n      <div /* will make a header bar FOR ALL OUR BROWSER ROUTES*/>\n        <Navbar />\n\n        <Switch>\n          <Route path=\"/RecentTracks\">\n            <RecentTracks />\n          </Route>\n          <Route path=\"/logout\">\n            <LogoutButton />\n          </Route>\n          <Route path=\"/TopTracks\">\n            <TopTracks />\n          </Route>\n          <Route path=\"/Recommendations\">\n            <Reccommendations />\n          </Route>\n          <Route path=\"/\">\n            <h1>Welcome to Spoti-FYI</h1>\n          </Route>\n        </Switch>\n        {/*isPlaying ? (\n          <div className=\"player\">\n            <b>Currently Playing</b>\n            <SpotifyPlayer\n              token={token}\n              syncExternalDevice={true}\n              syncExternalDeviceInterval={5}\n            />\n          </div>\n        ) : (\n          <div className=\"player\">\n            <b>Currently Not Playing Anything </b>\n          </div>\n        )*/}\n      </div>\n    </BrowserRouter>\n  );\n}\n// ****** NESTED ROUTING\n","import React, { Component, useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport Login from \"./Pages/Login\";\nimport Dashboard from \"./Pages/Dashboard\";\n\nimport { token } from \"./components/spotifyAPI\";\n\n\nfunction App() {\n\n  return (\n    <div className=\"App\">{token ? <Dashboard/> : <Login />}</div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}