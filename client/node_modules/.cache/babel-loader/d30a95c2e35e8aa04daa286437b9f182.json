{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React from 'react';\nimport axios from 'axios';\nexport default function Auth() {\n  _s();\n\n  const [accessToken, setAccessToken] = React.useState();\n  const [refreshToken, setRefreshToken] = React.useState();\n  const [expire, setExpire] = React.useState();\n  React.useEffect(() => {\n    // If we dont initially have a token\n    if (!refreshToken || !expire) return;\n    const interval = setInterval(() => {\n      axios.post(\"https://localhost:3001/refresh\", {\n        refreshToken\n      }).then(response => {\n        setAccessToken(response.data.accessToken);\n        setExpire(response.data.expiresIn);\n      }).catch(() => {\n        window.location = \"/\";\n      });\n    }, (expire - 60) * 1000);\n    return () => clearInterval(interval);\n  }, [refreshToken, expire]);\n  return accessToken;\n}\n\n_s(Auth, \"kXKDmevOej/o4ciYrFITcF8yB4Y=\");\n\n_c = Auth;\n\nvar _c;\n\n$RefreshReg$(_c, \"Auth\");","map":{"version":3,"sources":["/Users/macuser/project/spotify-node-react-starter-kit/client/src/Auth.js"],"names":["React","axios","Auth","accessToken","setAccessToken","useState","refreshToken","setRefreshToken","expire","setExpire","useEffect","interval","setInterval","post","then","response","data","expiresIn","catch","window","location","clearInterval"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,eAAe,SAASC,IAAT,GAAgB;AAAA;;AAE3B,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCJ,KAAK,CAACK,QAAN,EAAtC;AACA,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCP,KAAK,CAACK,QAAN,EAAxC;AACA,QAAM,CAACG,MAAD,EAASC,SAAT,IAAsBT,KAAK,CAACK,QAAN,EAA5B;AAEAL,EAAAA,KAAK,CAACU,SAAN,CAAgB,MAAM;AAClB;AACA,QAAI,CAACJ,YAAD,IAAiB,CAACE,MAAtB,EAA8B;AAC9B,UAAMG,QAAQ,GAAGC,WAAW,CAAC,MAAM;AAC/BX,MAAAA,KAAK,CAACY,IAAN,CAAW,gCAAX,EAA6C;AACzCP,QAAAA;AADyC,OAA7C,EAGCQ,IAHD,CAGMC,QAAQ,IAAI;AACdX,QAAAA,cAAc,CAACW,QAAQ,CAACC,IAAT,CAAcb,WAAf,CAAd;AACAM,QAAAA,SAAS,CAACM,QAAQ,CAACC,IAAT,CAAcC,SAAf,CAAT;AACH,OAND,EAOCC,KAPD,CAOO,MAAM;AACTC,QAAAA,MAAM,CAACC,QAAP,GAAkB,GAAlB;AACH,OATD;AAUH,KAX2B,EAWzB,CAACZ,MAAM,GAAG,EAAV,IAAgB,IAXS,CAA5B;AAaA,WAAO,MAAMa,aAAa,CAACV,QAAD,CAA1B;AACH,GAjBD,EAiBG,CAACL,YAAD,EAAeE,MAAf,CAjBH;AAoBA,SAAOL,WAAP;AACH;;GA3BuBD,I;;KAAAA,I","sourcesContent":["import React from 'react'\nimport axios from 'axios'\n\nexport default function Auth() {\n\n    const [accessToken, setAccessToken] = React.useState();\n    const [refreshToken, setRefreshToken] = React.useState();\n    const [expire, setExpire] = React.useState();\n\n    React.useEffect(() => {\n        // If we dont initially have a token\n        if (!refreshToken || !expire) return\n        const interval = setInterval(() => {\n            axios.post(\"https://localhost:3001/refresh\", {\n                refreshToken,\n            })\n            .then(response => {\n                setAccessToken(response.data.accessToken)\n                setExpire(response.data.expiresIn)\n            })\n            .catch(() => {\n                window.location = \"/\"\n            })\n        }, (expire - 60) * 1000)\n    \n        return () => clearInterval(interval)\n    }, [refreshToken, expire] )\n\n    \n    return accessToken\n}\n"]},"metadata":{},"sourceType":"module"}