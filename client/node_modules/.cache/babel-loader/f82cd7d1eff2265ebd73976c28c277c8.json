{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React from 'react';\nimport axios from 'axios';\nexport default function Auth(code) {\n  _s();\n\n  const [accessToken, setAccessToken] = React.useState();\n  const [refreshToken, setRefreshToken] = React.useState();\n  const [expire, setExpire] = React.useState();\n  React.useEffect(() => {\n    axios.post('http://localhost:3001/login', {\n      code\n    }).then(response => {\n      setAccessToken(response.data.accessToken);\n      setRefreshToken(response.data.refreshToken);\n      setExpire(response.data.expiresIn);\n      console.log(response);\n    }).catch(() => {\n      window.location = \"/\";\n    });\n  }, [code]);\n  React.useEffect(() => {\n    // If we dont initially have a token\n    if (!refreshToken || !expire) return;\n    const interval = setInterval(() => {\n      axios.post(\"https://localhost:3001/refresh\", {\n        refreshToken\n      }).then(response => {\n        setAccessToken(response.data.accessToken);\n        setExpire(response.data.expiresIn);\n      }).catch(() => {\n        window.location = \"/\";\n      });\n    }, (expire - 60) * 1000);\n    return () => clearInterval(interval);\n  }, [refreshToken, expire]);\n  return accessToken;\n}\n\n_s(Auth, \"/zBlDrVOSWw/qP7erfheITvO5z0=\");\n\n_c = Auth;\n\nvar _c;\n\n$RefreshReg$(_c, \"Auth\");","map":{"version":3,"sources":["/Users/macuser/project/spotify-node-react-starter-kit/client/src/Auth.js"],"names":["React","axios","Auth","code","accessToken","setAccessToken","useState","refreshToken","setRefreshToken","expire","setExpire","useEffect","post","then","response","data","expiresIn","console","log","catch","window","location","interval","setInterval","clearInterval"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,eAAe,SAASC,IAAT,CAAcC,IAAd,EAAoB;AAAA;;AAE/B,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCL,KAAK,CAACM,QAAN,EAAtC;AACA,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCR,KAAK,CAACM,QAAN,EAAxC;AACA,QAAM,CAACG,MAAD,EAASC,SAAT,IAAsBV,KAAK,CAACM,QAAN,EAA5B;AAEAN,EAAAA,KAAK,CAACW,SAAN,CAAgB,MAAM;AAElBV,IAAAA,KAAK,CAACW,IAAN,CAAW,6BAAX,EAA0C;AACtCT,MAAAA;AADsC,KAA1C,EAEGU,IAFH,CAEQC,QAAQ,IAAI;AAChBT,MAAAA,cAAc,CAACS,QAAQ,CAACC,IAAT,CAAcX,WAAf,CAAd;AACAI,MAAAA,eAAe,CAACM,QAAQ,CAACC,IAAT,CAAcR,YAAf,CAAf;AACAG,MAAAA,SAAS,CAACI,QAAQ,CAACC,IAAT,CAAcC,SAAf,CAAT;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYJ,QAAZ;AACH,KAPD,EAQCK,KARD,CAQO,MAAM;AACTC,MAAAA,MAAM,CAACC,QAAP,GAAkB,GAAlB;AACH,KAVD;AAWH,GAbD,EAaG,CAAClB,IAAD,CAbH;AAeAH,EAAAA,KAAK,CAACW,SAAN,CAAgB,MAAM;AAClB;AACA,QAAI,CAACJ,YAAD,IAAiB,CAACE,MAAtB,EAA8B;AAC9B,UAAMa,QAAQ,GAAGC,WAAW,CAAC,MAAM;AAC/BtB,MAAAA,KAAK,CAACW,IAAN,CAAW,gCAAX,EAA6C;AACzCL,QAAAA;AADyC,OAA7C,EAGCM,IAHD,CAGMC,QAAQ,IAAI;AACdT,QAAAA,cAAc,CAACS,QAAQ,CAACC,IAAT,CAAcX,WAAf,CAAd;AACAM,QAAAA,SAAS,CAACI,QAAQ,CAACC,IAAT,CAAcC,SAAf,CAAT;AACH,OAND,EAOCG,KAPD,CAOO,MAAM;AACTC,QAAAA,MAAM,CAACC,QAAP,GAAkB,GAAlB;AACH,OATD;AAUH,KAX2B,EAWzB,CAACZ,MAAM,GAAG,EAAV,IAAgB,IAXS,CAA5B;AAaA,WAAO,MAAMe,aAAa,CAACF,QAAD,CAA1B;AACH,GAjBD,EAiBG,CAACf,YAAD,EAAeE,MAAf,CAjBH;AAoBA,SAAOL,WAAP;AACH;;GA1CuBF,I;;KAAAA,I","sourcesContent":["import React from 'react'\nimport axios from 'axios'\n\nexport default function Auth(code) {\n\n    const [accessToken, setAccessToken] = React.useState();\n    const [refreshToken, setRefreshToken] = React.useState();\n    const [expire, setExpire] = React.useState();\n\n    React.useEffect(() => {\n\n        axios.post('http://localhost:3001/login', {\n            code,\n        }).then(response => {\n            setAccessToken(response.data.accessToken)\n            setRefreshToken(response.data.refreshToken)\n            setExpire(response.data.expiresIn)\n            console.log(response)\n        })\n        .catch(() => {\n            window.location = \"/\"\n        })\n    }, [code])\n\n    React.useEffect(() => {\n        // If we dont initially have a token\n        if (!refreshToken || !expire) return\n        const interval = setInterval(() => {\n            axios.post(\"https://localhost:3001/refresh\", {\n                refreshToken,\n            })\n            .then(response => {\n                setAccessToken(response.data.accessToken)\n                setExpire(response.data.expiresIn)\n            })\n            .catch(() => {\n                window.location = \"/\"\n            })\n        }, (expire - 60) * 1000)\n    \n        return () => clearInterval(interval)\n    }, [refreshToken, expire] )\n\n    \n    return accessToken\n}\n"]},"metadata":{},"sourceType":"module"}