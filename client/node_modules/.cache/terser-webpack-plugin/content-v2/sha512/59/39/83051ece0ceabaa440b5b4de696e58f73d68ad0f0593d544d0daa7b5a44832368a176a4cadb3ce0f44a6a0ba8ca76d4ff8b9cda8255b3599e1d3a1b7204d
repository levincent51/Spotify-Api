{"code":"(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{47:function(e,t,c){},48:function(e,t,c){},49:function(e,t,c){},76:function(e,t,c){\"use strict\";c.r(t);var n=c(0),r=c.n(n),s=c(26),a=c.n(s),o=(c(47),c(48),c(49),c(1));function i(){return Object(o.jsxs)(\"div\",{className:\"login\",children:[Object(o.jsx)(\"img\",{src:\"https://storage.googleapis.com/pr-newsroom-wp/1/2018/11/Spotify_Logo_CMYK_Green.png\",alt:\"Spotify-Logo\"}),Object(o.jsxs)(\"p\",{children:[\" \",\"A Spotify API designed to find your favourite songs over the past year \\ud83d\\ude00\",\" \"]}),Object(o.jsx)(\"a\",{href:\"https://react-express-spotify.herokuapp.com/login\",children:\" Login to Spotify \"})]})}var l=c(8),j=c(9),d=c(2);function b(e){var t=Math.floor(e/6e4),c=(e%6e4/1e3).toFixed(0);return t+\":\"+(c<10?\"0\":\"\")+c}var h=function(){window.localStorage.clear(),window.location.replace(\"/\");var e=Object(n.useState)(!1),t=Object(l.a)(e,2),c=t[0],r=t[1];return c?Object(o.jsx)(Redirect,{to:\"/\",push:!0}):Object(o.jsx)(Button,{onClick:function(){localStorage.removeItem(\"whpf_user\"),r(!0)},children:\"LogOut\"})},u=function(){return Object(o.jsxs)(\"div\",{className:\"navbar\",children:[Object(o.jsx)(j.b,{to:\"/\",children:\"HOME\"}),Object(o.jsxs)(\"ul\",{children:[Object(o.jsx)(\"li\",{children:Object(o.jsx)(j.b,{to:\"/TopTracks\",children:\"Top Tracks\"})}),Object(o.jsx)(\"li\",{children:Object(o.jsx)(j.b,{to:\"/RecentTracks\",children:\"RecentlyPlayed\"})})]}),Object(o.jsx)(j.b,{to:\"/logout\",children:\"Logout\"})]})},O=c(14),x=c.n(O),m=c(29),f=c(30),p=c.n(f),k=c(31),g=new(c.n(k).a),v=function(){var e=Object(m.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=window.localStorage.getItem(\"refresh_token\"),p.a.get(\"https://react-express-spotify.herokuapp.com/refresh_token\",{params:{refresh_token:t}}).then((function(e){var t=e.data.access_token;console.log(\"New acccess_token\",t),window.localStorage.setItem(\"access_token\",t),window.localStorage.setItem(\"token_timestamp\",Date.now()),window.location.reload()})).catch((function(e){return console.log(e)}));case 2:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=function(){var e,t={},c=/([^&;=]+)=?([^&;]*)/g,n=window.location.hash.substring(1);for(e=c.exec(n);e;)t[e[1]]=decodeURIComponent(e[2]),e=c.exec(n);return t}(),t=e.error,c=e.access_token,n=e.refresh_token;if(t&&(console.log(t),v()),c&&n)return window.location.replace(\"/\"),window.localStorage.setItem(\"access_token\",c),window.localStorage.setItem(\"refresh_token\",n),window.localStorage.setItem(\"token_timestamp\",Date.now()),c;var r=window.localStorage.getItem(\"token_timestamp\");return r&&\"undefined\"!==r&&Date.now()-r>36e5&&(console.log(\"Token expired, refreshing token\"),v()),window.localStorage.getItem(\"access_token\")}();g.setAccessToken(w);var y=function(e){var t=e.track;return Object(o.jsx)(\"a\",{className:\"TrackInfoLink\",href:t.uri,children:Object(o.jsxs)(\"div\",{className:\"card\",children:[Object(o.jsx)(\"img\",{src:t.album.images[1].url,alt:\"Track\"}),Object(o.jsxs)(\"div\",{className:\"containerCard\",children:[Object(o.jsx)(\"h4\",{children:Object(o.jsx)(\"b\",{children:t.artists.map((function(e){return e.name})).join(\", \")})}),Object(o.jsx)(\"p\",{children:t.name})]})]})})},N=function(){var e=Object(n.useState)(1),t=Object(l.a)(e,2),c=t[0],r=t[1],s=Object(n.useState)(),a=Object(l.a)(s,2),i=a[0],j=a[1],d=Object(n.useState)(\"short_term\"),b=Object(l.a)(d,2),h=b[0],u=b[1],O=function(e,t){var c;c=t,j(),u(c),r(e)};return Object(n.useEffect)((function(){g.getMyTopTracks({limit:50,time_range:h}).then((function(e){e&&(console.log(e),j({items:e.items}))})),g.getNewReleases().then((function(e){console.log(e)}))}),[h]),Object(o.jsxs)(\"div\",{children:[Object(o.jsx)(\"h2\",{children:\"Top Tracks\"}),Object(o.jsxs)(\"div\",{className:\"container\",children:[Object(o.jsxs)(\"div\",{className:\"bloc-tabs\",children:[Object(o.jsx)(\"button\",{className:1===c?\"tabs active-tabs\":\"tabs\",onClick:function(){return O(1,\"short_term\")},children:\"4 weeks\"}),Object(o.jsx)(\"button\",{className:2===c?\"tabs active-tabs\":\"tabs\",onClick:function(){return O(2,\"medium_term\")},children:\"6 months\"}),Object(o.jsx)(\"button\",{className:3===c?\"tabs active-tabs\":\"tabs\",onClick:function(){return O(3,\"long_term\")},children:\"All time\"})]}),i?Object(o.jsxs)(\"div\",{className:\"content-tabs\",children:[Object(o.jsx)(\"div\",{className:1===c?\"content  active-content\":\"content\",children:i.items.map((function(e,t){return Object(o.jsx)(y,{track:e},t)}))}),Object(o.jsx)(\"div\",{className:2===c?\"content  active-content\":\"content\",children:i.items.map((function(e,t){return Object(o.jsx)(y,{track:e},t)}))}),Object(o.jsx)(\"div\",{className:3===c?\"content  active-content\":\"content\",children:i.items.map((function(e,t){return Object(o.jsx)(y,{track:e},t)}))})]}):Object(o.jsx)(\"b\",{children:\"LOADING\"})]})]})},_=c(41),I=function(){var e=Object(n.useState)(),t=Object(l.a)(e,2),c=t[0],r=t[1];return Object(n.useEffect)((function(){g.getMyRecentlyPlayedTracks({limit:50}).then((function(e){e&&(console.log(e),r({items:e.items}))}))}),[]),console.log(c),Object(o.jsx)(\"div\",{children:c?Object(o.jsxs)(\"div\",{className:\"recently-played\",children:[Object(o.jsx)(\"h2\",{children:\"Recently played tracks\"}),Object(o.jsxs)(\"table\",{className:\"table\",children:[Object(o.jsx)(\"thead\",{children:Object(o.jsxs)(\"tr\",{children:[Object(o.jsx)(\"th\",{children:\"Duration\"}),Object(o.jsx)(\"th\",{children:\"Track\"}),Object(o.jsx)(\"th\",{children:\"Artist(s)\"}),Object(o.jsx)(\"th\",{children:\"Played at\"})]})}),Object(o.jsx)(\"tbody\",{children:c.items.map((function(e,t){return function(e,t){return Object(o.jsxs)(\"tr\",{children:[Object(o.jsx)(\"td\",{children:Object(o.jsx)(\"a\",{href:e.track.uri,className:\"row-link\",children:b(e.track.duration_ms)})}),Object(o.jsx)(\"td\",{children:Object(o.jsx)(\"a\",{href:e.track.uri,tabIndex:\"-1\",className:\"row-link\",children:e.track.name})}),Object(o.jsx)(\"td\",{children:Object(o.jsx)(\"a\",{href:e.track.uri,tabIndex:\"-1\",className:\"row-link\",children:e.track.artists.map((function(e){return e.name})).join(\", \")})}),Object(o.jsx)(\"td\",{children:Object(o.jsx)(\"a\",{href:e.track.uri,tabIndex:\"-1\",className:\"row-link\",children:Object(_.a)(Date.parse(e.played_at),\"dd/MM/yyyy, hh:mma\")})})]},e.played_at)}(e)}))})]})]}):Object(o.jsx)(\"b\",{children:\"LOADING\"})})},S=c(40);function T(e){var t=e.token,c=Object(n.useState)(!1),r=Object(l.a)(c,2),s=r[0],a=r[1];return Object(n.useEffect)((function(){var e=setInterval((function(){g.getMyCurrentPlaybackState().then((function(e){e?e.is_playing&&a(!0):e||a(!1)}))}),2e3);return function(){return clearInterval(e)}}),[s]),Object(o.jsx)(j.a,{children:Object(o.jsxs)(\"div\",{children:[Object(o.jsx)(u,{}),Object(o.jsxs)(d.c,{children:[Object(o.jsx)(d.a,{path:\"/RecentTracks\",children:Object(o.jsx)(I,{})}),Object(o.jsx)(d.a,{path:\"/logout\",children:Object(o.jsx)(h,{})}),Object(o.jsx)(d.a,{path:\"/TopTracks\",children:Object(o.jsx)(N,{})}),Object(o.jsx)(d.a,{path:\"/\",children:Object(o.jsx)(\"h1\",{children:\"WELCOME TO SPOTIFY API\"})})]}),s?Object(o.jsxs)(\"div\",{className:\"player\",children:[Object(o.jsx)(\"b\",{children:\"Currently Playing\"}),Object(o.jsx)(S.a,{token:t,syncExternalDevice:!0,syncExternalDeviceInterval:3})]}):Object(o.jsx)(\"div\",{className:\"player\",children:Object(o.jsx)(\"b\",{children:\"Currently Not Playing Anything \"})})]})})}var C=function(){return Object(o.jsx)(\"div\",{className:\"App\",children:w?Object(o.jsx)(T,{token:w}):Object(o.jsx)(i,{})})};a.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(C,{})}),document.getElementById(\"root\"))}},[[76,1,2]]]);","name":"static/js/main.6054a388.chunk.js","map":{"version":3,"sources":["static/js/main.6054a388.chunk.js"],"names":["this","push","module","exports","__webpack_require__","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","jsx_runtime","Login_Login","Object","className","children","src","alt","href","slicedToArray","react_router_dom","react_router","millisToMinutesAndSeconds","millis","minutes","Math","floor","seconds","toFixed","functions_LogoutButton","window","localStorage","clear","location","replace","_useState","_useState2","loggedOut","setLoggedOut","Redirect","to","Button","onClick","removeItem","components_Navbar","regenerator","regenerator_default","asyncToGenerator","axios","axios_default","spotify_web_api","spotifyApi","a","refreshAccessToken","_ref","mark","_callee","refresh_token","wrap","_context","prev","next","getItem","get","SERVER","params","then","res","access_token","data","console","log","setItem","Date","now","reload","catch","e","stop","apply","arguments","spotifyAPI_token","_getHashParams","hashParams","q","hash","substring","exec","decodeURIComponent","getHashParams","error","tokenExpiry","spotifyAPI_getAccessToken","setAccessToken","components_TrackInfo","track","uri","album","images","url","artists","map","name","join","Pages_TopTracks","toggleState","setToggleState","_useState3","_useState4","tracks","setTracks","_useState5","_useState6","timeRange","setTimeRange","toggleTab","index","time_range","newTimeRange","getMyTopTracks","limit","response","items","getNewReleases","key","format","Pages_RecentTracks","RecentlyPlayed","setRecentlyPlayed","getMyRecentlyPlayedTracks","item","duration_ms","tabIndex","parse","played_at","RecentTracks_TableItem","esm","Dashboard","token","isPlaying","setIsPlaying","interval","setInterval","getMyCurrentPlaybackState","is_playing","clearInterval","path","syncExternalDevice","syncExternalDeviceInterval","src_App","render","StrictMode","document","getElementById"],"mappings":"CAACA,KAAyB,mBAAIA,KAAyB,oBAAK,IAAIC,KAAK,CAAC,CAAC,GAAG,CAEpE,GACA,SAAUC,EAAQC,EAASC,KAM3B,GACA,SAAUF,EAAQC,EAASC,KAM3B,GACA,SAAUF,EAAQC,EAASC,KAM3B,GACA,SAAUF,EAAQG,EAAqBD,GAE7C,aAEAA,EAAoBE,EAAED,GAGtB,IAAIE,EAAQH,EAAoB,GAC5BI,EAA6BJ,EAAoBK,EAAEF,GAGnDG,EAAYN,EAAoB,IAChCO,EAAiCP,EAAoBK,EAAEC,GAYvDE,GATMR,EAAoB,IAGpBA,EAAoB,IAGlBA,EAAoB,IAGdA,EAAoB,IAG6B,SAASS,IAAc,OAAmBC,OAAOF,EAAkB,KAAzBE,CAA4B,MAAM,CAACC,UAAU,QAAQC,SAAS,CAAcF,OAAOF,EAAiB,IAAxBE,CAA2B,MAAM,CAACG,IAAI,sFAAsFC,IAAI,iBAA8BJ,OAAOF,EAAkB,KAAzBE,CAA4B,IAAI,CAACE,SAAS,CAAC,IAAI,sFAAsF,OAAoBF,OAAOF,EAAiB,IAAxBE,CAA2B,IAAI,CAACK,KAAjgB,oDAAihBH,SAAS,0BAEziB,IAAII,EAAgBhB,EAAoB,GAGpCiB,EAAmBjB,EAAoB,GAGvCkB,EAAelB,EAAoB,GAIsK,SAASmB,EAA0BC,GAAQ,IAAIC,EAAQC,KAAKC,MAAMH,EAAO,KAAWI,GAASJ,EAAO,IAAM,KAAMK,QAAQ,GAAG,OAAOJ,EAAQ,KAAKG,EAAQ,GAAG,IAAI,IAAIA,EAC/W,IACkHE,EAAuB,WAAwBC,OAAOC,aAAaC,QAAQF,OAAOG,SAASC,QAAQ,KAAK,IAAIC,EAAUtB,OAAOP,EAAgB,SAAvBO,EAA0B,GAAOuB,EAAWvB,OAAOM,EAA+B,EAAtCN,CAAyCsB,EAAU,GAAGE,EAAUD,EAAW,GAAGE,EAAaF,EAAW,GAA0F,OAAGC,EAA8BxB,OAAOF,EAAiB,IAAxBE,CAA2B0B,SAAS,CAACC,GAAG,IAAIxC,MAAK,IAA2Ba,OAAOF,EAAiB,IAAxBE,CAA2B4B,OAAO,CAACC,QAA5N,WAAkBX,aAAaY,WAAW,aAAaL,GAAa,IAAuKvB,SAAS,YAEwI6B,EAAlvB,WAAkB,OAAmB/B,OAAOF,EAAkB,KAAzBE,CAA4B,MAAM,CAACC,UAAU,SAASC,SAAS,CAAcF,OAAOF,EAAiB,IAAxBE,CAA2BO,EAA+B,EAAE,CAACoB,GAAG,IAAIzB,SAAS,SAAsBF,OAAOF,EAAkB,KAAzBE,CAA4B,KAAK,CAACE,SAAS,CAAcF,OAAOF,EAAiB,IAAxBE,CAA2B,KAAK,CAACE,SAAsBF,OAAOF,EAAiB,IAAxBE,CAA2BO,EAA+B,EAAE,CAACoB,GAAG,aAAazB,SAAS,iBAA8BF,OAAOF,EAAiB,IAAxBE,CAA2B,KAAK,CAACE,SAAsBF,OAAOF,EAAiB,IAAxBE,CAA2BO,EAA+B,EAAE,CAACoB,GAAG,gBAAgBzB,SAAS,wBAAqCF,OAAOF,EAAiB,IAAxBE,CAA2BO,EAA+B,EAAE,CAACoB,GAAG,UAAUzB,SAAS,eAE/sB8B,EAAc1C,EAAoB,IAClC2C,EAAmC3C,EAAoBK,EAAEqC,GAGzDE,EAAmB5C,EAAoB,IAGvC6C,EAAQ7C,EAAoB,IAC5B8C,EAA6B9C,EAAoBK,EAAEwC,GAGnDE,EAAkB/C,EAAoB,IAStCgD,EAAW,IAR4BhD,EAAoBK,EAAE0C,GAQtBE,GACvCC,EAAgC,WAAW,IAAIC,EAAKzC,OAAOkC,EAAkC,EAAzClC,CAAyDiC,EAAoBM,EAAEG,MAAK,SAASC,IAAU,IAAIC,EAAc,OAAOX,EAAoBM,EAAEM,MAAK,SAAkBC,GAAU,OAAS,OAAOA,EAASC,KAAKD,EAASE,MAAM,KAAK,EACjSJ,EAAc3B,OAAOC,aAAa+B,QAAQ,iBAAiBb,EAAcG,EAAEW,IAAIC,4DAAuB,CAACC,OAAO,CAACR,cAAcA,KAAiBS,MAAK,SAASC,GAAK,IAAIC,EAAaD,EAAIE,KAAKD,aAAaE,QAAQC,IAAI,oBAAoBH,GAActC,OAAOC,aAAayC,QAAQ,eAAeJ,GAActC,OAAOC,aAAayC,QAAQ,kBAAkBC,KAAKC,OAAO5C,OAAOG,SAAS0C,YAAYC,OAAM,SAASC,GAAG,OAAOP,QAAQC,IAAIM,MAAM,KAAK,EAAE,IAAI,MAAM,OAAOlB,EAASmB,UAAWtB,OAAa,OAAO,WAA8B,OAAOF,EAAKyB,MAAMhF,KAAKiF,YADjgB,GAMhCC,EAJ0B,WAC9B,IAAIC,EA9BJ,WAAyB,IAAsBL,EAAlBM,EAAW,GAAS9E,EAAE,uBAAuB+E,EAAEtD,OAAOG,SAASoD,KAAKC,UAAU,GAAe,IAAZT,EAAExE,EAAEkF,KAAKH,GAASP,GAAGM,EAAWN,EAAE,IAAIW,mBAAmBX,EAAE,IAAIA,EAAExE,EAAEkF,KAAKH,GAAI,OAAOD,EA8B9KM,GAAgBC,EAAMR,EAAeQ,MAAMtB,EAAac,EAAed,aAAaX,EAAcyB,EAAezB,cACjF,GAAhDiC,IAAOpB,QAAQC,IAAImB,GAAOrC,KAAyBe,GAAcX,EAA0N,OAA3M3B,OAAOG,SAASC,QAAQ,KAAKJ,OAAOC,aAAayC,QAAQ,eAAeJ,GAActC,OAAOC,aAAayC,QAAQ,gBAAgBf,GAAe3B,OAAOC,aAAayC,QAAQ,kBAAkBC,KAAKC,OAAcN,EACrS,IAAIuB,EAAY7D,OAAOC,aAAa+B,QAAQ,mBAA8O,OAAxN6B,GAA2B,cAAdA,GAA2BlB,KAAKC,MAAMiB,EAXjG,OAW8HrB,QAAQC,IAAI,mCAAmClB,KAA6CvB,OAAOC,aAAa+B,QAAQ,gBACrP8B,GAA4BzC,EAAW0C,eAAeZ,GAG3E,IAA8rBa,EAAtqB,SAAmBxC,GAAM,IAAIyC,EAAMzC,EAAKyC,MAAM,OAAmBlF,OAAOF,EAAiB,IAAxBE,CAA2B,IAAI,CAACC,UAAU,gBAAgBI,KAAK6E,EAAMC,IAAIjF,SAAsBF,OAAOF,EAAkB,KAAzBE,CAA4B,MAAM,CAACC,UAAU,OAAOC,SAAS,CAAcF,OAAOF,EAAiB,IAAxBE,CAA2B,MAAM,CAACG,IAAI+E,EAAME,MAAMC,OAAO,GAAGC,IAAIlF,IAAI,UAAuBJ,OAAOF,EAAkB,KAAzBE,CAA4B,MAAM,CAACC,UAAU,gBAAgBC,SAAS,CAAcF,OAAOF,EAAiB,IAAxBE,CAA2B,KAAK,CAACE,SAAsBF,OAAOF,EAAiB,IAAxBE,CAA2B,IAAI,CAACE,SAASgF,EAAMK,QAAQC,KAAI,SAASxB,GAAG,OAAOA,EAAEyB,QAAQC,KAAK,UAAuB1F,OAAOF,EAAiB,IAAxBE,CAA2B,IAAI,CAACE,SAASgF,EAAMO,gBAEomEE,EAAxtF,WAAqB,IAAIrE,EAAUtB,OAAOP,EAAgB,SAAvBO,CAA0B,GAAGuB,EAAWvB,OAAOM,EAA+B,EAAtCN,CAAyCsB,EAAU,GAAGsE,EAAYrE,EAAW,GAAGsE,EAAetE,EAAW,GAAOuE,EAAW9F,OAAOP,EAAgB,SAAvBO,GAA4B+F,EAAW/F,OAAOM,EAA+B,EAAtCN,CAAyC8F,EAAW,GAAGE,EAAOD,EAAW,GAAGE,EAAUF,EAAW,GAAOG,EAAWlG,OAAOP,EAAgB,SAAvBO,CAA0B,cAAcmG,EAAWnG,OAAOM,EAA+B,EAAtCN,CAAyCkG,EAAW,GAAGE,EAAUD,EAAW,GAAGE,EAAaF,EAAW,GAAiGG,EAAU,SAAmBC,EAAMC,GAAlH,IAAoBC,EAAAA,EAAqHD,EAAvGP,IAAYI,EAAaI,GAA0FZ,EAAeU,IAAuS,OAA9RvG,OAAOP,EAAiB,UAAxBO,EAA2B,WAAWsC,EAAWoE,eAAe,CAACC,MAAM,GAAGH,WAAWJ,IAAY/C,MAAK,SAASuD,GAAaA,IAAUnD,QAAQC,IAAIkD,GAAUX,EAAU,CAACY,MAAMD,EAASC,YAAYvE,EAAWwE,iBAAiBzD,MAAK,SAASuD,GAAUnD,QAAQC,IAAIkD,QAAe,CAACR,IAA+BpG,OAAOF,EAAkB,KAAzBE,CAA4B,MAAM,CAACE,SAAS,CAAcF,OAAOF,EAAiB,IAAxBE,CAA2B,KAAK,CAACE,SAAS,eAA4BF,OAAOF,EAAkB,KAAzBE,CAA4B,MAAM,CAACC,UAAU,YAAYC,SAAS,CAAcF,OAAOF,EAAkB,KAAzBE,CAA4B,MAAM,CAACC,UAAU,YAAYC,SAAS,CAAcF,OAAOF,EAAiB,IAAxBE,CAA2B,SAAS,CAACC,UAAwB,IAAd2F,EAAgB,mBAAmB,OAAO/D,QAAQ,WAAmB,OAAOyE,EAAU,EAAE,eAAgBpG,SAAS,YAAyBF,OAAOF,EAAiB,IAAxBE,CAA2B,SAAS,CAACC,UAAwB,IAAd2F,EAAgB,mBAAmB,OAAO/D,QAAQ,WAAmB,OAAOyE,EAAU,EAAE,gBAAiBpG,SAAS,aAA0BF,OAAOF,EAAiB,IAAxBE,CAA2B,SAAS,CAACC,UAAwB,IAAd2F,EAAgB,mBAAmB,OAAO/D,QAAQ,WAAmB,OAAOyE,EAAU,EAAE,cAAepG,SAAS,gBAAgB8F,EAAoBhG,OAAOF,EAAkB,KAAzBE,CAA4B,MAAM,CAACC,UAAU,eAAeC,SAAS,CAAcF,OAAOF,EAAiB,IAAxBE,CAA2B,MAAM,CAACC,UAAwB,IAAd2F,EAAgB,0BAA0B,UAAU1F,SAAS8F,EAAOa,MAAMrB,KAAI,SAASN,EAAM6B,GAAK,OAAmB/G,OAAOF,EAAiB,IAAxBE,CAA2BiF,EAAqB,CAACC,MAAMA,GAAO6B,QAAuB/G,OAAOF,EAAiB,IAAxBE,CAA2B,MAAM,CAACC,UAAwB,IAAd2F,EAAgB,0BAA0B,UAAU1F,SAAS8F,EAAOa,MAAMrB,KAAI,SAASN,EAAM6B,GAAK,OAAmB/G,OAAOF,EAAiB,IAAxBE,CAA2BiF,EAAqB,CAACC,MAAMA,GAAO6B,QAAuB/G,OAAOF,EAAiB,IAAxBE,CAA2B,MAAM,CAACC,UAAwB,IAAd2F,EAAgB,0BAA0B,UAAU1F,SAAS8F,EAAOa,MAAMrB,KAAI,SAASN,EAAM6B,GAAK,OAAmB/G,OAAOF,EAAiB,IAAxBE,CAA2BiF,EAAqB,CAACC,MAAMA,GAAO6B,WAA0B/G,OAAOF,EAAiB,IAAxBE,CAA2B,IAAI,CAACE,SAAS,mBAEvrF8G,EAAS1H,EAAoB,IAI+oC2H,EAD/J,WAAwB,IAAI3F,EAAUtB,OAAOP,EAAgB,SAAvBO,GAA4BuB,EAAWvB,OAAOM,EAA+B,EAAtCN,CAAyCsB,EAAU,GAAG4F,EAAe3F,EAAW,GAAG4F,EAAkB5F,EAAW,GAC5+B,OAAlOvB,OAAOP,EAAiB,UAAxBO,EAA2B,WAAWsC,EAAW8E,0BAA0B,CAACT,MAAM,KAAKtD,MAAK,SAASuD,GAAaA,IAAUnD,QAAQC,IAAIkD,GAAUO,EAAkB,CAACN,MAAMD,EAASC,cAAc,IAAIpD,QAAQC,IAAIwD,GAAmClH,OAAOF,EAAiB,IAAxBE,CAA2B,MAAM,CAACE,SAASgH,EAA4BlH,OAAOF,EAAkB,KAAzBE,CAA4B,MAAM,CAACC,UAAU,kBAAkBC,SAAS,CAAcF,OAAOF,EAAiB,IAAxBE,CAA2B,KAAK,CAACE,SAAS,2BAAwCF,OAAOF,EAAkB,KAAzBE,CAA4B,QAAQ,CAACC,UAAU,QAAQC,SAAS,CAAcF,OAAOF,EAAiB,IAAxBE,CAA2B,QAAQ,CAACE,SAAsBF,OAAOF,EAAkB,KAAzBE,CAA4B,KAAK,CAACE,SAAS,CAAcF,OAAOF,EAAiB,IAAxBE,CAA2B,KAAK,CAACE,SAAS,aAA0BF,OAAOF,EAAiB,IAAxBE,CAA2B,KAAK,CAACE,SAAS,UAAuBF,OAAOF,EAAiB,IAAxBE,CAA2B,KAAK,CAACE,SAAS,cAA2BF,OAAOF,EAAiB,IAAxBE,CAA2B,KAAK,CAACE,SAAS,mBAAgCF,OAAOF,EAAiB,IAAxBE,CAA2B,QAAQ,CAACE,SAASgH,EAAeL,MAAMrB,KAAI,SAAS6B,EAAKd,GAAO,OADz/B,SAAmBc,EAAKd,GAAO,OAAmBvG,OAAOF,EAAkB,KAAzBE,CAA4B,KAAK,CAACE,SAAS,CAAcF,OAAOF,EAAiB,IAAxBE,CAA2B,KAAK,CAACE,SAAsBF,OAAOF,EAAiB,IAAxBE,CAA2B,IAAI,CAACK,KAAKgH,EAAKnC,MAAMC,IAAIlF,UAAU,WAAWC,SAASO,EAA0B4G,EAAKnC,MAAMoC,iBAA8BtH,OAAOF,EAAiB,IAAxBE,CAA2B,KAAK,CAACE,SAAsBF,OAAOF,EAAiB,IAAxBE,CAA2B,IAAI,CAACK,KAAKgH,EAAKnC,MAAMC,IAAIoC,SAAS,KAAKtH,UAAU,WAAWC,SAASmH,EAAKnC,MAAMO,SAAsBzF,OAAOF,EAAiB,IAAxBE,CAA2B,KAAK,CAACE,SAAsBF,OAAOF,EAAiB,IAAxBE,CAA2B,IAAI,CAACK,KAAKgH,EAAKnC,MAAMC,IAAIoC,SAAS,KAAKtH,UAAU,WAAWC,SAASmH,EAAKnC,MAAMK,QAAQC,KAAI,SAASxB,GAAG,OAAOA,EAAEyB,QAAQC,KAAK,UAAuB1F,OAAOF,EAAiB,IAAxBE,CAA2B,KAAK,CAACE,SAAsBF,OAAOF,EAAiB,IAAxBE,CAA2B,IAAI,CAACK,KAAKgH,EAAKnC,MAAMC,IAAIoC,SAAS,KAAKtH,UAAU,WAAWC,SAASF,OAAOgH,EAAwB,EAA/BhH,CAAkC4D,KAAK4D,MAAMH,EAAKI,WAAW,4BAA4BJ,EAAKI,WACqDC,CAAuBL,cAAoCrH,OAAOF,EAAiB,IAAxBE,CAA2B,IAAI,CAACE,SAAS,eAE3nCyH,EAAMrI,EAAoB,IAG9B,SAASsI,EAAUnF,GAAM,IAAIoF,EAAMpF,EAAKoF,MAAUvG,EAAUtB,OAAOP,EAAgB,SAAvBO,EAA0B,GAAOuB,EAAWvB,OAAOM,EAA+B,EAAtCN,CAAyCsB,EAAU,GAAGwG,EAAUvG,EAAW,GAAGwG,EAAaxG,EAAW,GAG9M,OAFAvB,OAAOP,EAAiB,UAAxBO,EAA2B,WAAW,IAAIgI,EAASC,aAAY,WAAW3F,EAAW4F,4BAA4B7E,MAAK,SAASuD,GAAaA,EAAaA,EAASuB,YAAYJ,GAAa,GAAiBnB,GAAUmB,GAAa,QAAa,KAAM,OAAO,WAAW,OAAOK,cAAcJ,MAAc,CAACF,IAEzR9H,OAAOF,EAAiB,IAAxBE,CAA2BO,EAAwC,EAAE,CAACL,SAAsBF,OAAOF,EAAkB,KAAzBE,CAA4B,MAAM,CAACE,SAAS,CAAcF,OAAOF,EAAiB,IAAxBE,CAA2B+B,EAAkB,IAAiB/B,OAAOF,EAAkB,KAAzBE,CAA4BQ,EAA6B,EAAE,CAACN,SAAS,CAAcF,OAAOF,EAAiB,IAAxBE,CAA2BQ,EAA4B,EAAE,CAAC6H,KAAK,gBAAgBnI,SAAsBF,OAAOF,EAAiB,IAAxBE,CAA2BiH,EAAmB,MAAmBjH,OAAOF,EAAiB,IAAxBE,CAA2BQ,EAA4B,EAAE,CAAC6H,KAAK,UAAUnI,SAAsBF,OAAOF,EAAiB,IAAxBE,CAA2BgB,EAAuB,MAAmBhB,OAAOF,EAAiB,IAAxBE,CAA2BQ,EAA4B,EAAE,CAAC6H,KAAK,aAAanI,SAAsBF,OAAOF,EAAiB,IAAxBE,CAA2B2F,EAAgB,MAAmB3F,OAAOF,EAAiB,IAAxBE,CAA2BQ,EAA4B,EAAE,CAAC6H,KAAK,IAAInI,SAAsBF,OAAOF,EAAiB,IAAxBE,CAA2B,KAAK,CAACE,SAAS,gCAAgC4H,EAAuB9H,OAAOF,EAAkB,KAAzBE,CAA4B,MAAM,CAACC,UAAU,SAASC,SAAS,CAAcF,OAAOF,EAAiB,IAAxBE,CAA2B,IAAI,CAACE,SAAS,sBAAmCF,OAAOF,EAAiB,IAAxBE,CAA2B2H,EAAqB,EAAE,CAACE,MAAMA,EAAMS,oBAAmB,EAAKC,2BAA2B,OAAoBvI,OAAOF,EAAiB,IAAxBE,CAA2B,MAAM,CAACC,UAAU,SAASC,SAAsBF,OAAOF,EAAiB,IAAxBE,CAA2B,IAAI,CAACE,SAAS,2CAE3lC,IAAIsI,EAA1R,WAAmB,OAAmBxI,OAAOF,EAAiB,IAAxBE,CAA2B,MAAM,CAACC,UAAU,MAAMC,SAASkE,EAA8BpE,OAAOF,EAAiB,IAAxBE,CAA2B4H,EAAU,CAACC,MAAMzD,IAAgCpE,OAAOF,EAAiB,IAAxBE,CAA2BD,EAAY,OAElPF,EAAkB0C,EAAEkG,OAAoBzI,OAAOF,EAAiB,IAAxBE,CAA2BN,EAAc6C,EAAEmG,WAAW,CAACxI,SAAsBF,OAAOF,EAAiB,IAAxBE,CAA2BwI,EAAQ,MAAMG,SAASC,eAAe,WAIpL,CAAC,CAAC,GAAG,EAAE"},"input":"(this[\"webpackJsonpclient\"] = this[\"webpackJsonpclient\"] || []).push([[0],{\n\n/***/ 47:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 48:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 49:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 76:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(0);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(26);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(47);\n\n// EXTERNAL MODULE: ./src/App.css\nvar App = __webpack_require__(48);\n\n// EXTERNAL MODULE: ./src/Pages/Login.css\nvar Login = __webpack_require__(49);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(1);\n\n// CONCATENATED MODULE: ./src/Pages/Login.js\nvar SERVER_URL=\"https://react-express-spotify.herokuapp.com/login\";function Login_Login(){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"login\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:\"https://storage.googleapis.com/pr-newsroom-wp/1/2018/11/Spotify_Logo_CMYK_Green.png\",alt:\"Spotify-Logo\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[\" \",\"A Spotify API designed to find your favourite songs over the past year \\uD83D\\uDE00\",\" \"]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:SERVER_URL,children:\" Login to Spotify \"})]});}\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 5 modules\nvar slicedToArray = __webpack_require__(8);\n\n// EXTERNAL MODULE: ./node_modules/react-router-dom/esm/react-router-dom.js\nvar react_router_dom = __webpack_require__(9);\n\n// EXTERNAL MODULE: ./node_modules/react-router-dom/node_modules/react-router/esm/react-router.js\nvar react_router = __webpack_require__(2);\n\n// CONCATENATED MODULE: ./src/components/functions.js\n// gets hash parameters\nfunction getHashParams(){var hashParams={};var e,r=/([^&;=]+)=?([^&;]*)/g,q=window.location.hash.substring(1);e=r.exec(q);while(e){hashParams[e[1]]=decodeURIComponent(e[2]);e=r.exec(q);}return hashParams;}function millisToMinutesAndSeconds(millis){var minutes=Math.floor(millis/60000);var seconds=(millis%60000/1000).toFixed(0);return minutes+\":\"+(seconds<10?\"0\":\"\")+seconds;}// Retrieve object stored in localStorage\nvar getObject=function getObject(key){var value=window.sessionStorage.getItem(key);if(value===null||value===\"undefined\")return null;return JSON.parse(value);};// Store object as string in storage\nvar setObject=function setObject(key,value){return window.sessionStorage.setItem(key,JSON.stringify(value));};var functions_LogoutButton=function LogoutButton(){window.localStorage.clear();window.location.replace(\"/\");var _useState=Object(react[\"useState\"])(false),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),loggedOut=_useState2[0],setLoggedOut=_useState2[1];var logout=function logout(){localStorage.removeItem(\"whpf_user\");setLoggedOut(true);};if(loggedOut){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Redirect,{to:\"/\",push:true});}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button,{onClick:logout,children:\"LogOut\"});};\n// CONCATENATED MODULE: ./src/components/Navbar.js\nvar Navbar_Navbar=function Navbar(){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"navbar\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:\"/\",children:\"HOME\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"ul\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:\"/TopTracks\",children:\"Top Tracks\"})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:\"/RecentTracks\",children:\"RecentlyPlayed\"})})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"b\" /* Link */],{to:\"/logout\",children:\"Logout\"})]});};/* harmony default export */ var components_Navbar = (Navbar_Navbar);\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(14);\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(29);\n\n// EXTERNAL MODULE: ./node_modules/axios/index.js\nvar axios = __webpack_require__(30);\nvar axios_default = /*#__PURE__*/__webpack_require__.n(axios);\n\n// EXTERNAL MODULE: ./node_modules/spotify-web-api-js/src/spotify-web-api.js\nvar spotify_web_api = __webpack_require__(31);\nvar spotify_web_api_default = /*#__PURE__*/__webpack_require__.n(spotify_web_api);\n\n// CONCATENATED MODULE: ./src/components/spotifyAPI.js\nvar EXPIRATION_TIME=3600000;// 1 hour\nvar SERVER=\"https://react-express-spotify.herokuapp.com/\";// or https://react-express-spotify.herokuapp.com http://localhost:8888\n//REFRESH ACCESS TOKEN EVERY 1 HOUR\n// REFRESH_URI\n// USES JMPerez's spotify-web-api-js\nvar spotifyApi=new spotify_web_api_default.a();// constantly refreshing\nvar refreshAccessToken=/*#__PURE__*/function(){var _ref=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var refresh_token;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// take refresh token from local storage\nrefresh_token=window.localStorage.getItem(\"refresh_token\");axios_default.a.get(SERVER+\"refresh_token\",{params:{refresh_token:refresh_token}}).then(function(res){var access_token=res.data.access_token;console.log(\"New acccess_token\",access_token);window.localStorage.setItem(\"access_token\",access_token);window.localStorage.setItem(\"token_timestamp\",Date.now());window.location.reload();}).catch(function(e){return console.log(e);});case 2:case\"end\":return _context.stop();}}},_callee);}));return function refreshAccessToken(){return _ref.apply(this,arguments);};}();// GET TOKEN, REFRESH IF REQUIRED\nvar spotifyAPI_getAccessToken=function getAccessToken(){// Takes token from our url\nvar _getHashParams=getHashParams(),error=_getHashParams.error,access_token=_getHashParams.access_token,refresh_token=_getHashParams.refresh_token;//  token invalid freom timeout\nif(error){console.log(error);refreshAccessToken();}if(access_token&&refresh_token){window.location.replace(\"/\");window.localStorage.setItem(\"access_token\",access_token);window.localStorage.setItem(\"refresh_token\",refresh_token);window.localStorage.setItem(\"token_timestamp\",Date.now());return access_token;}// THIS WILL AUTO REFRESH OUR TOKEN BASED ON EXPIRY TIME\nvar tokenExpiry=window.localStorage.getItem(\"token_timestamp\");if(tokenExpiry&&tokenExpiry!==\"undefined\"&&Date.now()-tokenExpiry>EXPIRATION_TIME){console.log(\"Token expired, refreshing token\");refreshAccessToken();}var local_access_token=window.localStorage.getItem(\"access_token\");return local_access_token;};// SET OUR TOKEN with our spotify-web-api-js\nvar spotifyAPI_token=spotifyAPI_getAccessToken();spotifyApi.setAccessToken(spotifyAPI_token);\n// CONCATENATED MODULE: ./src/components/TrackInfo.js\n// our track card for displaying artist, trackname and the picture\nvar TrackInfo_TrackInfo=function TrackInfo(_ref){var track=_ref.track;return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{className:\"TrackInfoLink\",href:track.uri,children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"card\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:track.album.images[1].url,alt:\"Track\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"containerCard\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h4\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:track.artists.map(function(e){return e.name;}).join(\", \")})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:track.name})]})]})});};/* harmony default export */ var components_TrackInfo = (TrackInfo_TrackInfo);\n// CONCATENATED MODULE: ./src/Pages/TopTracks.js\nvar TopTracks_TopTracks=function TopTracks(){var _useState=Object(react[\"useState\"])(1),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),toggleState=_useState2[0],setToggleState=_useState2[1];var _useState3=Object(react[\"useState\"])(),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),tracks=_useState4[0],setTracks=_useState4[1];var _useState5=Object(react[\"useState\"])(\"short_term\"),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),timeRange=_useState6[0],setTimeRange=_useState6[1];var changeTerm=function changeTerm(newTimeRange){setTracks();setTimeRange(newTimeRange);};var toggleTab=function toggleTab(index,time_range){changeTerm(time_range);setToggleState(index);};Object(react[\"useEffect\"])(function(){spotifyApi.getMyTopTracks({limit:50,time_range:timeRange}).then(function(response){if(response){console.log(response);setTracks({items:response.items});}});spotifyApi.getNewReleases().then(function(response){console.log(response);});},[timeRange]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h2\",{children:\"Top Tracks\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"container\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"bloc-tabs\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:toggleState===1?\"tabs active-tabs\":\"tabs\",onClick:function onClick(){return toggleTab(1,\"short_term\");},children:\"4 weeks\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:toggleState===2?\"tabs active-tabs\":\"tabs\",onClick:function onClick(){return toggleTab(2,\"medium_term\");},children:\"6 months\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:toggleState===3?\"tabs active-tabs\":\"tabs\",onClick:function onClick(){return toggleTab(3,\"long_term\");},children:\"All time\"})]}),tracks?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"content-tabs\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:toggleState===1?\"content  active-content\":\"content\",children:tracks.items.map(function(track,key){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_TrackInfo,{track:track},key);})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:toggleState===2?\"content  active-content\":\"content\",children:tracks.items.map(function(track,key){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_TrackInfo,{track:track},key);})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:toggleState===3?\"content  active-content\":\"content\",children:tracks.items.map(function(track,key){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_TrackInfo,{track:track},key);})})]}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:\"LOADING\"})]})]});};/* harmony default export */ var Pages_TopTracks = (TopTracks_TopTracks);\n// EXTERNAL MODULE: ./node_modules/date-fns/esm/format/index.js + 31 modules\nvar format = __webpack_require__(41);\n\n// CONCATENATED MODULE: ./src/Pages/RecentTracks.js\nvar RecentTracks_TableItem=function TableItem(item,index){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"tr\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"td\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:item.track.uri,className:\"row-link\",children:millisToMinutesAndSeconds(item.track.duration_ms)})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"td\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:item.track.uri,tabIndex:\"-1\",className:\"row-link\",children:item.track.name})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"td\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:item.track.uri,tabIndex:\"-1\",className:\"row-link\",children:item.track.artists.map(function(e){return e.name;}).join(\", \")})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"td\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\",{href:item.track.uri,tabIndex:\"-1\",className:\"row-link\",children:Object(format[\"a\" /* default */])(Date.parse(item.played_at),\"dd/MM/yyyy, hh:mma\")})})]},item.played_at);};var RecentTracks_RecentTracks=function RecentTracks(){var _useState=Object(react[\"useState\"])(),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),RecentlyPlayed=_useState2[0],setRecentlyPlayed=_useState2[1];// variable limit? with useeffect to load more maybe on scroll down, limit will change\nObject(react[\"useEffect\"])(function(){spotifyApi.getMyRecentlyPlayedTracks({limit:50}).then(function(response){if(response){console.log(response);setRecentlyPlayed({items:response.items});}});},[]);console.log(RecentlyPlayed);return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:RecentlyPlayed?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"recently-played\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h2\",{children:\"Recently played tracks\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"table\",{className:\"table\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"thead\",{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"tr\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"th\",{children:\"Duration\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"th\",{children:\"Track\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"th\",{children:\"Artist(s)\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"th\",{children:\"Played at\"})]})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"tbody\",{children:RecentlyPlayed.items.map(function(item,index){return RecentTracks_TableItem(item,index);})})]})]}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:\"LOADING\"})});};/* harmony default export */ var Pages_RecentTracks = (RecentTracks_RecentTracks);\n// EXTERNAL MODULE: ./node_modules/react-spotify-web-playback/esm/index.js + 31 modules\nvar esm = __webpack_require__(40);\n\n// CONCATENATED MODULE: ./src/Pages/Dashboard.js\nfunction Dashboard(_ref){var token=_ref.token;var _useState=Object(react[\"useState\"])(false),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),isPlaying=_useState2[0],setIsPlaying=_useState2[1];// Note the spotify web player SDK is in beta so performance is janky\nObject(react[\"useEffect\"])(function(){var interval=setInterval(function(){spotifyApi.getMyCurrentPlaybackState().then(function(response){if(response){if(response.is_playing){setIsPlaying(true);}}else if(!response){setIsPlaying(false);}});},2000);return function(){return clearInterval(interval);};},[isPlaying]);//return should return, getTOPTRACKS, make playlist\n// DashBoard should tell us our favourite genre based on our top artist\nreturn/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dom[\"a\" /* BrowserRouter */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_Navbar,{}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react_router[\"c\" /* Switch */],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Route */],{path:\"/RecentTracks\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Pages_RecentTracks,{})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Route */],{path:\"/logout\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(functions_LogoutButton,{})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Route */],{path:\"/TopTracks\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Pages_TopTracks,{})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router[\"a\" /* Route */],{path:\"/\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\",{children:\"WELCOME TO SPOTIFY API\"})})]}),isPlaying?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"player\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:\"Currently Playing\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(esm[\"a\" /* default */],{token:token,syncExternalDevice:true,syncExternalDeviceInterval:3})]}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"player\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\",{children:\"Currently Not Playing Anything \"})})]})});}// ****** NESTED ROUTING\n// CONCATENATED MODULE: ./src/App.js\nfunction App_App(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"App\",children:spotifyAPI_token?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Dashboard,{token:spotifyAPI_token}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Login_Login,{})});}/* harmony default export */ var src_App = (App_App);\n// CONCATENATED MODULE: ./src/index.js\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{})}),document.getElementById(\"root\"));\n\n/***/ })\n\n},[[76,1,2]]]);","inputSourceMap":{"version":3,"sources":["/Users/macuser/project/spotify-api-project/client/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/macuser/project/spotify-api-project/client/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/macuser/project/spotify-api-project/client/node_modules/postcss-loader/src/index.js??postcss!/Users/macuser/project/spotify-api-project/client/src/index.css","/Users/macuser/project/spotify-api-project/client/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/macuser/project/spotify-api-project/client/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/macuser/project/spotify-api-project/client/node_modules/postcss-loader/src/index.js??postcss!/Users/macuser/project/spotify-api-project/client/src/App.css","/Users/macuser/project/spotify-api-project/client/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/macuser/project/spotify-api-project/client/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/macuser/project/spotify-api-project/client/node_modules/postcss-loader/src/index.js??postcss!/Users/macuser/project/spotify-api-project/client/src/Pages/Login.css","/Users/macuser/project/spotify-api-project/client/src/Pages/Login.js","/Users/macuser/project/spotify-api-project/client/src/components/functions.js","/Users/macuser/project/spotify-api-project/client/src/components/Navbar.js","/Users/macuser/project/spotify-api-project/client/src/components/spotifyAPI.js","/Users/macuser/project/spotify-api-project/client/src/components/TrackInfo.js","/Users/macuser/project/spotify-api-project/client/src/Pages/TopTracks.js","/Users/macuser/project/spotify-api-project/client/src/Pages/RecentTracks.js","/Users/macuser/project/spotify-api-project/client/src/Pages/Dashboard.js","/Users/macuser/project/spotify-api-project/client/src/App.js","/Users/macuser/project/spotify-api-project/client/src/index.js"],"names":["SERVER_URL","Login","getHashParams","hashParams","e","r","q","window","location","hash","substring","exec","decodeURIComponent","millisToMinutesAndSeconds","millis","minutes","Math","floor","seconds","toFixed","getObject","key","value","sessionStorage","getItem","JSON","parse","setObject","setItem","stringify","LogoutButton","localStorage","clear","replace","useState","loggedOut","setLoggedOut","logout","removeItem","Navbar","EXPIRATION_TIME","SERVER","spotifyApi","SpotifyWebApi","refreshAccessToken","refresh_token","axios","get","params","then","res","access_token","data","console","log","Date","now","reload","catch","getAccessToken","error","tokenExpiry","local_access_token","token","setAccessToken","TrackInfo","track","uri","album","images","url","artists","map","name","join","TopTracks","toggleState","setToggleState","tracks","setTracks","timeRange","setTimeRange","changeTerm","newTimeRange","toggleTab","index","time_range","useEffect","getMyTopTracks","limit","response","items","getNewReleases","TableItem","item","duration_ms","format","played_at","RecentTracks","RecentlyPlayed","setRecentlyPlayed","getMyRecentlyPlayedTracks","Dashboard","isPlaying","setIsPlaying","interval","setInterval","getMyCurrentPlaybackState","is_playing","clearInterval","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","import React from \"react\";\nimport \"./Login.css\";\n\nconst SERVER_URL = \"https://react-express-spotify.herokuapp.com/login\";\n\nexport default function Login() {\n  return (\n    <div className=\"login\">\n      <img\n        src=\"https://storage.googleapis.com/pr-newsroom-wp/1/2018/11/Spotify_Logo_CMYK_Green.png\"\n        alt=\"Spotify-Logo\"\n      />\n      <p>\n        {\" \"}\n        A Spotify API designed to find your favourite songs over the past year\n        😀{\" \"}\n      </p>\n      <a href={SERVER_URL}> Login to Spotify </a>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\n\n// gets hash parameters\nexport function getHashParams() {\n  var hashParams = {};\n  var e,\n    r = /([^&;=]+)=?([^&;]*)/g,\n    q = window.location.hash.substring(1);\n  e = r.exec(q);\n  while (e) {\n    hashParams[e[1]] = decodeURIComponent(e[2]);\n    e = r.exec(q);\n  }\n\n  return hashParams;\n}\n\nexport function millisToMinutesAndSeconds(millis) {\n  var minutes = Math.floor(millis / 60000);\n  var seconds = ((millis % 60000) / 1000).toFixed(0);\n  return minutes + \":\" + (seconds < 10 ? \"0\" : \"\") + seconds;\n}\n\n// Retrieve object stored in localStorage\n\nexport const getObject = (key) => {\n  const value = window.sessionStorage.getItem(key);\n  if (value === null || value === \"undefined\") return null;\n  return JSON.parse(value);\n};\n\n// Store object as string in storage\nexport const setObject = (key, value) =>\n  window.sessionStorage.setItem(key, JSON.stringify(value));\n\nexport const LogoutButton = () => {\n  window.localStorage.clear();\n  window.location.replace(\"/\");\n  const [loggedOut, setLoggedOut] = useState(false);\n\n  const logout = () => {\n    localStorage.removeItem(\"whpf_user\");\n    setLoggedOut(true);\n  };\n\n  if (loggedOut) {\n    return <Redirect to=\"/\" push={true} />;\n  }\n\n  return <Button onClick={logout}>LogOut</Button>;\n};\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nconst Navbar = () => {\n  return (\n    <div className=\"navbar\">\n      <Link to=\"/\">HOME</Link>\n      <ul>\n        <li>\n          <Link to=\"/TopTracks\">Top Tracks</Link>\n        </li>\n        <li>\n          <Link to=\"/RecentTracks\">RecentlyPlayed</Link>\n        </li>\n      </ul>\n      <Link to=\"/logout\">Logout</Link>\n    </div>\n  );\n};\n\nexport default Navbar;\n","import axios from \"axios\";\nimport { getHashParams, getObject, setObject } from \"./functions\";\nimport SpotifyWebApi from \"spotify-web-api-js\";\n\nconst EXPIRATION_TIME = 3600000; // 1 hour\nconst SERVER = \"https://react-express-spotify.herokuapp.com/\"; // or https://react-express-spotify.herokuapp.com http://localhost:8888\n//REFRESH ACCESS TOKEN EVERY 1 HOUR\n// REFRESH_URI\n\n// USES JMPerez's spotify-web-api-js\n\nexport const spotifyApi = new SpotifyWebApi();\n\n// constantly refreshing\nexport const refreshAccessToken = async () => {\n  // take refresh token from local storage\n  const refresh_token = window.localStorage.getItem(\"refresh_token\");\n  axios\n    .get(SERVER + \"refresh_token\", {\n      params: {\n        refresh_token: refresh_token,\n      },\n    })\n    .then((res) => {\n      const access_token = res.data.access_token;\n      console.log(\"New acccess_token\", access_token);\n      window.localStorage.setItem(\"access_token\", access_token);\n      window.localStorage.setItem(\"token_timestamp\", Date.now());\n      window.location.reload();\n    })\n    .catch((e) => console.log(e));\n};\n\n// GET TOKEN, REFRESH IF REQUIRED\nexport const getAccessToken = () => {\n  // Takes token from our url\n\n  const { error, access_token, refresh_token } = getHashParams();\n\n  //  token invalid freom timeout\n  if (error) {\n    console.log(error);\n    refreshAccessToken();\n  }\n\n  if (access_token && refresh_token) {\n    window.location.replace(\"/\");\n    window.localStorage.setItem(\"access_token\", access_token);\n    window.localStorage.setItem(\"refresh_token\", refresh_token);\n    window.localStorage.setItem(\"token_timestamp\", Date.now());\n\n    return access_token;\n  }\n  // THIS WILL AUTO REFRESH OUR TOKEN BASED ON EXPIRY TIME\n  const tokenExpiry = window.localStorage.getItem(\"token_timestamp\");\n\n  if (\n    tokenExpiry &&\n    tokenExpiry !== \"undefined\" &&\n    Date.now() - tokenExpiry > EXPIRATION_TIME\n  ) {\n    console.log(\"Token expired, refreshing token\");\n    refreshAccessToken();\n  }\n\n  const local_access_token = window.localStorage.getItem(\"access_token\");\n\n  return local_access_token;\n};\n\n// SET OUR TOKEN with our spotify-web-api-js\nexport const token = getAccessToken();\n\nspotifyApi.setAccessToken(token);\n","import React, { useState, useEffect } from \"react\";\n\n// our track card for displaying artist, trackname and the picture\nconst TrackInfo = ({ track }) => {\n  return (\n    <a className=\"TrackInfoLink\" href={track.uri}>\n      <div className=\"card\">\n        <img src={track.album.images[1].url} alt=\"Track\" />\n        <div className=\"containerCard\">\n          <h4>\n            <b>{track.artists.map((e) => e.name).join(\", \")}</b>\n          </h4>\n          <p>{track.name}</p>\n        </div>\n      </div>\n    </a>\n  );\n};\n\nexport default TrackInfo;\n","import React, { useState, useEffect } from \"react\";\nimport { spotifyApi } from \"../components/spotifyAPI\";\nimport TrackInfo from \"../components/TrackInfo\";\n\nconst TopTracks = () => {\n  const [toggleState, setToggleState] = useState(1);\n\n  const [tracks, setTracks] = useState();\n  const [timeRange, setTimeRange] = useState(\"short_term\");\n\n  const changeTerm = (newTimeRange) => {\n    setTracks();\n    setTimeRange(newTimeRange);\n  };\n  const toggleTab = (index, time_range) => {\n    changeTerm(time_range);\n    setToggleState(index);\n  };\n  useEffect(() => {\n    spotifyApi\n      .getMyTopTracks({\n        limit: 50,\n        time_range: timeRange,\n      })\n      .then((response) => {\n        if (response) {\n          console.log(response);\n          setTracks({\n            items: response.items,\n          });\n        }\n      });\n\n    spotifyApi.getNewReleases().then((response) => {\n      console.log(response);\n    });\n  }, [timeRange]);\n\n  return (\n    <div>\n      <h2>Top Tracks</h2>\n\n      <div className=\"container\">\n        <div className=\"bloc-tabs\">\n          <button\n            className={toggleState === 1 ? \"tabs active-tabs\" : \"tabs\"}\n            onClick={() => toggleTab(1, \"short_term\")}\n          >\n            4 weeks\n          </button>\n          <button\n            className={toggleState === 2 ? \"tabs active-tabs\" : \"tabs\"}\n            onClick={() => toggleTab(2, \"medium_term\")}\n          >\n            6 months\n          </button>\n          <button\n            className={toggleState === 3 ? \"tabs active-tabs\" : \"tabs\"}\n            onClick={() => toggleTab(3, \"long_term\")}\n          >\n            All time\n          </button>\n        </div>\n        {tracks ? (\n          <div className=\"content-tabs\">\n            <div\n              className={\n                toggleState === 1 ? \"content  active-content\" : \"content\"\n              }\n            >\n\n\n              {tracks.items.map((track, key) => (\n                <TrackInfo key={key} track={track} />\n              ))}\n            </div>\n\n            <div\n              className={\n                toggleState === 2 ? \"content  active-content\" : \"content\"\n              }\n            >\n       \n\n              {tracks.items.map((track, key) => (\n                <TrackInfo key={key} track={track} />\n              ))}\n            </div>\n\n            <div\n              className={\n                toggleState === 3 ? \"content  active-content\" : \"content\"\n              }\n            >\n    \n\n              {tracks.items.map((track, key) => (\n                <TrackInfo key={key} track={track} />\n              ))}\n            </div>\n          </div>\n        ) : (\n          <b>LOADING</b>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default TopTracks;\n","import React, { Component, useState, useEffect } from \"react\";\nimport { spotifyApi } from \"../components/spotifyAPI\";\nimport format from \"date-fns/format\";\nimport { millisToMinutesAndSeconds } from \"../components/functions\";\n\nconst TableItem = (item, index) => (\n  <tr key={item.played_at}>\n    <td>\n      <a href={item.track.uri} className=\"row-link\">\n        {millisToMinutesAndSeconds(item.track.duration_ms)}\n      </a>\n    </td>\n\n    <td>\n      <a href={item.track.uri} tabIndex=\"-1\" className=\"row-link\">\n        {item.track.name}\n      </a>\n    </td>\n    <td>\n      <a href={item.track.uri} tabIndex=\"-1\" className=\"row-link\">\n        {item.track.artists.map((e) => e.name).join(\", \")}\n      </a>\n    </td>\n    <td>\n      <a href={item.track.uri} tabIndex=\"-1\" className=\"row-link\">\n        {format(Date.parse(item.played_at), \"dd/MM/yyyy, hh:mma\")}\n      </a>\n    </td>\n  </tr>\n);\n\nconst RecentTracks = () => {\n  const [RecentlyPlayed, setRecentlyPlayed] = useState();\n\n  // variable limit? with useeffect to load more maybe on scroll down, limit will change\n  useEffect(() => {\n    spotifyApi\n      .getMyRecentlyPlayedTracks({\n        limit: 50,\n      })\n      .then((response) => {\n        if (response) {\n          console.log(response);\n          setRecentlyPlayed({\n            items: response.items,\n          });\n        }\n      });\n  }, []);\n  console.log(RecentlyPlayed);\n\n  return (\n    <div>\n      {RecentlyPlayed ? (\n        <div className=\"recently-played\">\n          <h2>Recently played tracks</h2>\n\n          <table className=\"table\">\n            <thead>\n              <tr>\n                <th>Duration</th>\n                <th>Track</th>\n                <th>Artist(s)</th>\n                <th>Played at</th>\n              </tr>\n            </thead>\n            <tbody>\n              {RecentlyPlayed.items.map((item, index) =>\n                TableItem(item, index)\n              )}\n            </tbody>\n          </table>\n        </div>\n      ) : (\n        <b>LOADING</b>\n      )}\n    </div>\n  );\n};\nexport default RecentTracks;\n","import React, { Component, useState, useEffect } from \"react\";\nimport { BrowserRouter, Route, Switch, Link } from \"react-router-dom\";\nimport { LogoutButton } from \"../components/functions\";\nimport Navbar from \"../components/Navbar\";\nimport TopTracks from \"./TopTracks\";\nimport RecentTracks from \"./RecentTracks\";\nimport SpotifyPlayer from \"react-spotify-web-playback\";\nimport { spotifyApi } from \"../components/spotifyAPI\";\n\nexport default function Dashboard({ token }) {\n  const [isPlaying, setIsPlaying] = useState(false);\n  // Note the spotify web player SDK is in beta so performance is janky\n  useEffect(() => {\n    const interval = setInterval(() => {\n      spotifyApi.getMyCurrentPlaybackState().then((response) => {\n        if (response) {\n          if (response.is_playing) {\n            setIsPlaying(true);\n          }\n        } else if (!response) {\n          setIsPlaying(false);\n        }\n      });\n    }, 2000);\n    return () => clearInterval(interval);\n  }, [isPlaying]);\n\n  //return should return, getTOPTRACKS, make playlist\n  // DashBoard should tell us our favourite genre based on our top artist\n  return (\n    <BrowserRouter>\n      <div /* will make a header bar FOR ALL OUR BROWSER ROUTES*/>\n        <Navbar />\n\n        <Switch>\n          <Route path=\"/RecentTracks\">\n            <RecentTracks />\n          </Route>\n          <Route path=\"/logout\">\n            <LogoutButton />\n          </Route>\n          <Route path=\"/TopTracks\">\n            <TopTracks />\n          </Route>\n          <Route path=\"/\">\n            <h1>WELCOME TO SPOTIFY API</h1>\n          </Route>\n        </Switch>\n        {isPlaying ? (\n          <div className=\"player\">\n            <b>Currently Playing</b>\n            <SpotifyPlayer\n              token={token}\n              syncExternalDevice={true}\n              syncExternalDeviceInterval={3}\n            />\n          </div>\n        ) : (\n          <div className=\"player\">\n            <b>Currently Not Playing Anything </b>\n          </div>\n        )}\n      </div>\n    </BrowserRouter>\n  );\n}\n// ****** NESTED ROUTING\n","import React, { Component, useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport Login from \"./Pages/Login\";\nimport Dashboard from \"./Pages/Dashboard\";\n\nimport { token } from \"./components/spotifyAPI\";\n\nfunction App() {\n  return (\n    <div className=\"App\">{token ? <Dashboard token={token} /> : <Login />}</div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"]}}